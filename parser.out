Created by PLY version 3.4 (http://www.dabeaz.com/ply)

Grammar

Rule 0     S' -> oprex
Rule 1     oprex -> <empty>
Rule 2     oprex -> WHITESPACE
Rule 3     oprex -> NEWLINE
Rule 4     oprex -> NEWLINE expression
Rule 5     oprex -> NEWLINE INDENT expression DEDENT
Rule 6     expression -> lookup NEWLINE
Rule 7     expression -> lookup NEWLINE beginscope definitions DEDENT
Rule 8     lookup -> VARNAME
Rule 9     lookup -> SLASH cells
Rule 10    cells -> cell SLASH
Rule 11    cells -> cell SLASH cells
Rule 12    cell -> VARNAME
Rule 13    cell -> VARNAME QUESTMARK
Rule 14    cell -> LPAREN VARNAME RPAREN
Rule 15    cell -> LPAREN VARNAME RPAREN QUESTMARK
Rule 16    cell -> LPAREN VARNAME QUESTMARK RPAREN
Rule 17    beginscope -> INDENT
Rule 18    definitions -> definition
Rule 19    definitions -> definition definitions
Rule 20    definition -> assignment
Rule 21    definition -> GLOBALMARK assignment
Rule 22    assignment -> VARNAME EQUALSIGN assignment
Rule 23    assignment -> VARNAME EQUALSIGN expression
Rule 24    assignment -> VARNAME EQUALSIGN LITERAL NEWLINE
Rule 25    assignment -> VARNAME COLON charclass
Rule 26    charclass -> CHARCLASS NEWLINE
Rule 27    charclass -> CHARCLASS NEWLINE INDENT definitions DEDENT

Terminals, with rules where they appear

CHARCLASS            : 26 27
COLON                : 25
DEDENT               : 5 7 27
EQUALSIGN            : 22 23 24
GLOBALMARK           : 21
INDENT               : 5 17 27
LITERAL              : 24
LPAREN               : 14 15 16
NEWLINE              : 3 4 5 6 7 24 26 27
QUESTMARK            : 13 15 16
RPAREN               : 14 15 16
SLASH                : 9 10 11
VARNAME              : 8 12 13 14 15 16 22 23 24 25
WHITESPACE           : 2
error                : 

Nonterminals, with rules where they appear

assignment           : 20 21 22
beginscope           : 7
cell                 : 10 11
cells                : 9 11
charclass            : 25
definition           : 18 19
definitions          : 7 19 27
expression           : 4 5 23
lookup               : 6 7
oprex                : 0

Parsing method: LALR

state 0

    (0) S' -> . oprex
    (1) oprex -> .
    (2) oprex -> . WHITESPACE
    (3) oprex -> . NEWLINE
    (4) oprex -> . NEWLINE expression
    (5) oprex -> . NEWLINE INDENT expression DEDENT

    $end            reduce using rule 1 (oprex -> .)
    WHITESPACE      shift and go to state 2
    NEWLINE         shift and go to state 3

    oprex                          shift and go to state 1

state 1

    (0) S' -> oprex .



state 2

    (2) oprex -> WHITESPACE .

    $end            reduce using rule 2 (oprex -> WHITESPACE .)


state 3

    (3) oprex -> NEWLINE .
    (4) oprex -> NEWLINE . expression
    (5) oprex -> NEWLINE . INDENT expression DEDENT
    (6) expression -> . lookup NEWLINE
    (7) expression -> . lookup NEWLINE beginscope definitions DEDENT
    (8) lookup -> . VARNAME
    (9) lookup -> . SLASH cells

    $end            reduce using rule 3 (oprex -> NEWLINE .)
    INDENT          shift and go to state 4
    VARNAME         shift and go to state 5
    SLASH           shift and go to state 7

    lookup                         shift and go to state 6
    expression                     shift and go to state 8

state 4

    (5) oprex -> NEWLINE INDENT . expression DEDENT
    (6) expression -> . lookup NEWLINE
    (7) expression -> . lookup NEWLINE beginscope definitions DEDENT
    (8) lookup -> . VARNAME
    (9) lookup -> . SLASH cells

    VARNAME         shift and go to state 5
    SLASH           shift and go to state 7

    lookup                         shift and go to state 6
    expression                     shift and go to state 9

state 5

    (8) lookup -> VARNAME .

    NEWLINE         reduce using rule 8 (lookup -> VARNAME .)


state 6

    (6) expression -> lookup . NEWLINE
    (7) expression -> lookup . NEWLINE beginscope definitions DEDENT

    NEWLINE         shift and go to state 10


state 7

    (9) lookup -> SLASH . cells
    (10) cells -> . cell SLASH
    (11) cells -> . cell SLASH cells
    (12) cell -> . VARNAME
    (13) cell -> . VARNAME QUESTMARK
    (14) cell -> . LPAREN VARNAME RPAREN
    (15) cell -> . LPAREN VARNAME RPAREN QUESTMARK
    (16) cell -> . LPAREN VARNAME QUESTMARK RPAREN

    VARNAME         shift and go to state 11
    LPAREN          shift and go to state 14

    cell                           shift and go to state 13
    cells                          shift and go to state 12

state 8

    (4) oprex -> NEWLINE expression .

    $end            reduce using rule 4 (oprex -> NEWLINE expression .)


state 9

    (5) oprex -> NEWLINE INDENT expression . DEDENT

    DEDENT          shift and go to state 15


state 10

    (6) expression -> lookup NEWLINE .
    (7) expression -> lookup NEWLINE . beginscope definitions DEDENT
    (17) beginscope -> . INDENT

    GLOBALMARK      reduce using rule 6 (expression -> lookup NEWLINE .)
    VARNAME         reduce using rule 6 (expression -> lookup NEWLINE .)
    DEDENT          reduce using rule 6 (expression -> lookup NEWLINE .)
    $end            reduce using rule 6 (expression -> lookup NEWLINE .)
    INDENT          shift and go to state 17

    beginscope                     shift and go to state 16

state 11

    (12) cell -> VARNAME .
    (13) cell -> VARNAME . QUESTMARK

    SLASH           reduce using rule 12 (cell -> VARNAME .)
    QUESTMARK       shift and go to state 18


state 12

    (9) lookup -> SLASH cells .

    NEWLINE         reduce using rule 9 (lookup -> SLASH cells .)


state 13

    (10) cells -> cell . SLASH
    (11) cells -> cell . SLASH cells

    SLASH           shift and go to state 19


state 14

    (14) cell -> LPAREN . VARNAME RPAREN
    (15) cell -> LPAREN . VARNAME RPAREN QUESTMARK
    (16) cell -> LPAREN . VARNAME QUESTMARK RPAREN

    VARNAME         shift and go to state 20


state 15

    (5) oprex -> NEWLINE INDENT expression DEDENT .

    $end            reduce using rule 5 (oprex -> NEWLINE INDENT expression DEDENT .)


state 16

    (7) expression -> lookup NEWLINE beginscope . definitions DEDENT
    (18) definitions -> . definition
    (19) definitions -> . definition definitions
    (20) definition -> . assignment
    (21) definition -> . GLOBALMARK assignment
    (22) assignment -> . VARNAME EQUALSIGN assignment
    (23) assignment -> . VARNAME EQUALSIGN expression
    (24) assignment -> . VARNAME EQUALSIGN LITERAL NEWLINE
    (25) assignment -> . VARNAME COLON charclass

    GLOBALMARK      shift and go to state 23
    VARNAME         shift and go to state 24

    definition                     shift and go to state 21
    assignment                     shift and go to state 22
    definitions                    shift and go to state 25

state 17

    (17) beginscope -> INDENT .

    GLOBALMARK      reduce using rule 17 (beginscope -> INDENT .)
    VARNAME         reduce using rule 17 (beginscope -> INDENT .)


state 18

    (13) cell -> VARNAME QUESTMARK .

    SLASH           reduce using rule 13 (cell -> VARNAME QUESTMARK .)


state 19

    (10) cells -> cell SLASH .
    (11) cells -> cell SLASH . cells
    (10) cells -> . cell SLASH
    (11) cells -> . cell SLASH cells
    (12) cell -> . VARNAME
    (13) cell -> . VARNAME QUESTMARK
    (14) cell -> . LPAREN VARNAME RPAREN
    (15) cell -> . LPAREN VARNAME RPAREN QUESTMARK
    (16) cell -> . LPAREN VARNAME QUESTMARK RPAREN

    NEWLINE         reduce using rule 10 (cells -> cell SLASH .)
    VARNAME         shift and go to state 11
    LPAREN          shift and go to state 14

    cell                           shift and go to state 13
    cells                          shift and go to state 26

state 20

    (14) cell -> LPAREN VARNAME . RPAREN
    (15) cell -> LPAREN VARNAME . RPAREN QUESTMARK
    (16) cell -> LPAREN VARNAME . QUESTMARK RPAREN

    RPAREN          shift and go to state 28
    QUESTMARK       shift and go to state 27


state 21

    (18) definitions -> definition .
    (19) definitions -> definition . definitions
    (18) definitions -> . definition
    (19) definitions -> . definition definitions
    (20) definition -> . assignment
    (21) definition -> . GLOBALMARK assignment
    (22) assignment -> . VARNAME EQUALSIGN assignment
    (23) assignment -> . VARNAME EQUALSIGN expression
    (24) assignment -> . VARNAME EQUALSIGN LITERAL NEWLINE
    (25) assignment -> . VARNAME COLON charclass

    DEDENT          reduce using rule 18 (definitions -> definition .)
    GLOBALMARK      shift and go to state 23
    VARNAME         shift and go to state 24

    definition                     shift and go to state 21
    assignment                     shift and go to state 22
    definitions                    shift and go to state 29

state 22

    (20) definition -> assignment .

    GLOBALMARK      reduce using rule 20 (definition -> assignment .)
    VARNAME         reduce using rule 20 (definition -> assignment .)
    DEDENT          reduce using rule 20 (definition -> assignment .)


state 23

    (21) definition -> GLOBALMARK . assignment
    (22) assignment -> . VARNAME EQUALSIGN assignment
    (23) assignment -> . VARNAME EQUALSIGN expression
    (24) assignment -> . VARNAME EQUALSIGN LITERAL NEWLINE
    (25) assignment -> . VARNAME COLON charclass

    VARNAME         shift and go to state 24

    assignment                     shift and go to state 30

state 24

    (22) assignment -> VARNAME . EQUALSIGN assignment
    (23) assignment -> VARNAME . EQUALSIGN expression
    (24) assignment -> VARNAME . EQUALSIGN LITERAL NEWLINE
    (25) assignment -> VARNAME . COLON charclass

    EQUALSIGN       shift and go to state 32
    COLON           shift and go to state 31


state 25

    (7) expression -> lookup NEWLINE beginscope definitions . DEDENT

    DEDENT          shift and go to state 33


state 26

    (11) cells -> cell SLASH cells .

    NEWLINE         reduce using rule 11 (cells -> cell SLASH cells .)


state 27

    (16) cell -> LPAREN VARNAME QUESTMARK . RPAREN

    RPAREN          shift and go to state 34


state 28

    (14) cell -> LPAREN VARNAME RPAREN .
    (15) cell -> LPAREN VARNAME RPAREN . QUESTMARK

    SLASH           reduce using rule 14 (cell -> LPAREN VARNAME RPAREN .)
    QUESTMARK       shift and go to state 35


state 29

    (19) definitions -> definition definitions .

    DEDENT          reduce using rule 19 (definitions -> definition definitions .)


state 30

    (21) definition -> GLOBALMARK assignment .

    GLOBALMARK      reduce using rule 21 (definition -> GLOBALMARK assignment .)
    VARNAME         reduce using rule 21 (definition -> GLOBALMARK assignment .)
    DEDENT          reduce using rule 21 (definition -> GLOBALMARK assignment .)


state 31

    (25) assignment -> VARNAME COLON . charclass
    (26) charclass -> . CHARCLASS NEWLINE
    (27) charclass -> . CHARCLASS NEWLINE INDENT definitions DEDENT

    CHARCLASS       shift and go to state 37

    charclass                      shift and go to state 36

state 32

    (22) assignment -> VARNAME EQUALSIGN . assignment
    (23) assignment -> VARNAME EQUALSIGN . expression
    (24) assignment -> VARNAME EQUALSIGN . LITERAL NEWLINE
    (22) assignment -> . VARNAME EQUALSIGN assignment
    (23) assignment -> . VARNAME EQUALSIGN expression
    (24) assignment -> . VARNAME EQUALSIGN LITERAL NEWLINE
    (25) assignment -> . VARNAME COLON charclass
    (6) expression -> . lookup NEWLINE
    (7) expression -> . lookup NEWLINE beginscope definitions DEDENT
    (8) lookup -> . VARNAME
    (9) lookup -> . SLASH cells

    LITERAL         shift and go to state 39
    VARNAME         shift and go to state 38
    SLASH           shift and go to state 7

    assignment                     shift and go to state 40
    lookup                         shift and go to state 6
    expression                     shift and go to state 41

state 33

    (7) expression -> lookup NEWLINE beginscope definitions DEDENT .

    GLOBALMARK      reduce using rule 7 (expression -> lookup NEWLINE beginscope definitions DEDENT .)
    VARNAME         reduce using rule 7 (expression -> lookup NEWLINE beginscope definitions DEDENT .)
    DEDENT          reduce using rule 7 (expression -> lookup NEWLINE beginscope definitions DEDENT .)
    $end            reduce using rule 7 (expression -> lookup NEWLINE beginscope definitions DEDENT .)


state 34

    (16) cell -> LPAREN VARNAME QUESTMARK RPAREN .

    SLASH           reduce using rule 16 (cell -> LPAREN VARNAME QUESTMARK RPAREN .)


state 35

    (15) cell -> LPAREN VARNAME RPAREN QUESTMARK .

    SLASH           reduce using rule 15 (cell -> LPAREN VARNAME RPAREN QUESTMARK .)


state 36

    (25) assignment -> VARNAME COLON charclass .

    GLOBALMARK      reduce using rule 25 (assignment -> VARNAME COLON charclass .)
    VARNAME         reduce using rule 25 (assignment -> VARNAME COLON charclass .)
    DEDENT          reduce using rule 25 (assignment -> VARNAME COLON charclass .)


state 37

    (26) charclass -> CHARCLASS . NEWLINE
    (27) charclass -> CHARCLASS . NEWLINE INDENT definitions DEDENT

    NEWLINE         shift and go to state 42


state 38

    (22) assignment -> VARNAME . EQUALSIGN assignment
    (23) assignment -> VARNAME . EQUALSIGN expression
    (24) assignment -> VARNAME . EQUALSIGN LITERAL NEWLINE
    (25) assignment -> VARNAME . COLON charclass
    (8) lookup -> VARNAME .

    EQUALSIGN       shift and go to state 32
    COLON           shift and go to state 31
    NEWLINE         reduce using rule 8 (lookup -> VARNAME .)


state 39

    (24) assignment -> VARNAME EQUALSIGN LITERAL . NEWLINE

    NEWLINE         shift and go to state 43


state 40

    (22) assignment -> VARNAME EQUALSIGN assignment .

    GLOBALMARK      reduce using rule 22 (assignment -> VARNAME EQUALSIGN assignment .)
    VARNAME         reduce using rule 22 (assignment -> VARNAME EQUALSIGN assignment .)
    DEDENT          reduce using rule 22 (assignment -> VARNAME EQUALSIGN assignment .)


state 41

    (23) assignment -> VARNAME EQUALSIGN expression .

    GLOBALMARK      reduce using rule 23 (assignment -> VARNAME EQUALSIGN expression .)
    VARNAME         reduce using rule 23 (assignment -> VARNAME EQUALSIGN expression .)
    DEDENT          reduce using rule 23 (assignment -> VARNAME EQUALSIGN expression .)


state 42

    (26) charclass -> CHARCLASS NEWLINE .
    (27) charclass -> CHARCLASS NEWLINE . INDENT definitions DEDENT

    GLOBALMARK      reduce using rule 26 (charclass -> CHARCLASS NEWLINE .)
    VARNAME         reduce using rule 26 (charclass -> CHARCLASS NEWLINE .)
    DEDENT          reduce using rule 26 (charclass -> CHARCLASS NEWLINE .)
    INDENT          shift and go to state 44


state 43

    (24) assignment -> VARNAME EQUALSIGN LITERAL NEWLINE .

    GLOBALMARK      reduce using rule 24 (assignment -> VARNAME EQUALSIGN LITERAL NEWLINE .)
    VARNAME         reduce using rule 24 (assignment -> VARNAME EQUALSIGN LITERAL NEWLINE .)
    DEDENT          reduce using rule 24 (assignment -> VARNAME EQUALSIGN LITERAL NEWLINE .)


state 44

    (27) charclass -> CHARCLASS NEWLINE INDENT . definitions DEDENT
    (18) definitions -> . definition
    (19) definitions -> . definition definitions
    (20) definition -> . assignment
    (21) definition -> . GLOBALMARK assignment
    (22) assignment -> . VARNAME EQUALSIGN assignment
    (23) assignment -> . VARNAME EQUALSIGN expression
    (24) assignment -> . VARNAME EQUALSIGN LITERAL NEWLINE
    (25) assignment -> . VARNAME COLON charclass

    GLOBALMARK      shift and go to state 23
    VARNAME         shift and go to state 24

    definitions                    shift and go to state 45
    assignment                     shift and go to state 22
    definition                     shift and go to state 21

state 45

    (27) charclass -> CHARCLASS NEWLINE INDENT definitions . DEDENT

    DEDENT          shift and go to state 46


state 46

    (27) charclass -> CHARCLASS NEWLINE INDENT definitions DEDENT .

    GLOBALMARK      reduce using rule 27 (charclass -> CHARCLASS NEWLINE INDENT definitions DEDENT .)
    VARNAME         reduce using rule 27 (charclass -> CHARCLASS NEWLINE INDENT definitions DEDENT .)
    DEDENT          reduce using rule 27 (charclass -> CHARCLASS NEWLINE INDENT definitions DEDENT .)

