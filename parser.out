Created by PLY version 3.4 (http://www.dabeaz.com/ply)

Grammar

Rule 0     S' -> oprex
Rule 1     oprex -> <empty>
Rule 2     oprex -> WHITESPACE
Rule 3     oprex -> NEWLINE
Rule 4     oprex -> NEWLINE expression
Rule 5     oprex -> NEWLINE INDENT expression DEDENT
Rule 6     expression -> repeat_expr
Rule 7     expression -> string_expr
Rule 8     expression -> lookup_expr
Rule 9     repeat_expr -> quantifier WHITESPACE expression
Rule 10    repeat_expr -> quantifier COLON charclass
Rule 11    string_expr -> STRING NEWLINE optional_block
Rule 12    lookup_expr -> lookup NEWLINE optional_block
Rule 13    lookup_expr -> SLASH lookup_chain NEWLINE optional_block
Rule 14    quantifier -> repeat_N_times
Rule 15    quantifier -> repeat_range
Rule 16    quantifier -> optionalize
Rule 17    repeat_N_times -> NUMBER of
Rule 18    repeat_range -> numrange of
Rule 19    repeat_range -> numrange WHITESPACE BACKTRACK MINUS of
Rule 20    repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of
Rule 21    repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of
Rule 22    optionalize -> optional of
Rule 23    numrange -> DOT DOT
Rule 24    numrange -> NUMBER DOT DOT
Rule 25    numrange -> DOT DOT NUMBER
Rule 26    numrange -> NUMBER DOT DOT NUMBER
Rule 27    of -> WHITESPACE VARNAME
Rule 28    lookup_chain -> lookup SLASH
Rule 29    lookup_chain -> lookup SLASH lookup_chain
Rule 30    lookup -> simple_lookup
Rule 31    lookup -> captured_lookup
Rule 32    lookup -> captured_optional_lookup
Rule 33    simple_lookup -> VARNAME
Rule 34    simple_lookup -> VARNAME optional
Rule 35    captured_lookup -> LPAREN VARNAME RPAREN
Rule 36    captured_lookup -> LPAREN VARNAME RPAREN optional
Rule 37    captured_optional_lookup -> LPAREN VARNAME optional RPAREN
Rule 38    optional -> QUESTMARK
Rule 39    optional -> QUESTMARK QUESTMARK
Rule 40    optional -> QUESTMARK EXCLAMARK
Rule 41    optional_block -> begin_block definitions end_block
Rule 42    optional_block -> <empty>
Rule 43    begin_block -> INDENT
Rule 44    end_block -> DEDENT
Rule 45    definitions -> definition
Rule 46    definitions -> definition definitions
Rule 47    definition -> assignment
Rule 48    definition -> GLOBALMARK assignment
Rule 49    assignment -> VARNAME EQUALSIGN assignment
Rule 50    assignment -> VARNAME EQUALSIGN expression
Rule 51    assignment -> VARNAME COLON charclass
Rule 52    charclass -> CHARCLASS NEWLINE optional_block

Terminals, with rules where they appear

BACKTRACK            : 19 20 21
CHARCLASS            : 52
COLON                : 10 51
DEDENT               : 5 44
DOT                  : 20 20 21 21 23 23 24 24 25 25 26 26
EQUALSIGN            : 49 50
EXCLAMARK            : 40
GLOBALMARK           : 48
INDENT               : 5 43
LPAREN               : 35 36 37
MINUS                : 19
NEWLINE              : 3 4 5 11 12 13 52
NUMBER               : 17 20 21 21 24 25 26 26
PLUS                 : 20 21
QUESTMARK            : 38 39 39 40
RPAREN               : 35 36 37
SLASH                : 13 28 29
STRING               : 11
VARNAME              : 27 33 34 35 36 37 49 50 51
WHITESPACE           : 2 9 19 20 21 27
error                : 

Nonterminals, with rules where they appear

assignment           : 47 48 49
begin_block          : 41
captured_lookup      : 31
captured_optional_lookup : 32
charclass            : 10 51
definition           : 45 46
definitions          : 41 46
end_block            : 41
expression           : 4 5 9 50
lookup               : 12 28 29
lookup_chain         : 13 29
lookup_expr          : 8
numrange             : 18 19
of                   : 17 18 19 20 21 22
oprex                : 0
optional             : 22 34 36 37
optional_block       : 11 12 13 52
optionalize          : 16
quantifier           : 9 10
repeat_N_times       : 14
repeat_expr          : 6
repeat_range         : 15
simple_lookup        : 30
string_expr          : 7

Parsing method: LALR

state 0

    (0) S' -> . oprex
    (1) oprex -> .
    (2) oprex -> . WHITESPACE
    (3) oprex -> . NEWLINE
    (4) oprex -> . NEWLINE expression
    (5) oprex -> . NEWLINE INDENT expression DEDENT

    $end            reduce using rule 1 (oprex -> .)
    WHITESPACE      shift and go to state 2
    NEWLINE         shift and go to state 3

    oprex                          shift and go to state 1

state 1

    (0) S' -> oprex .



state 2

    (2) oprex -> WHITESPACE .

    $end            reduce using rule 2 (oprex -> WHITESPACE .)


state 3

    (3) oprex -> NEWLINE .
    (4) oprex -> NEWLINE . expression
    (5) oprex -> NEWLINE . INDENT expression DEDENT
    (6) expression -> . repeat_expr
    (7) expression -> . string_expr
    (8) expression -> . lookup_expr
    (9) repeat_expr -> . quantifier WHITESPACE expression
    (10) repeat_expr -> . quantifier COLON charclass
    (11) string_expr -> . STRING NEWLINE optional_block
    (12) lookup_expr -> . lookup NEWLINE optional_block
    (13) lookup_expr -> . SLASH lookup_chain NEWLINE optional_block
    (14) quantifier -> . repeat_N_times
    (15) quantifier -> . repeat_range
    (16) quantifier -> . optionalize
    (30) lookup -> . simple_lookup
    (31) lookup -> . captured_lookup
    (32) lookup -> . captured_optional_lookup
    (17) repeat_N_times -> . NUMBER of
    (18) repeat_range -> . numrange of
    (19) repeat_range -> . numrange WHITESPACE BACKTRACK MINUS of
    (20) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of
    (21) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of
    (22) optionalize -> . optional of
    (33) simple_lookup -> . VARNAME
    (34) simple_lookup -> . VARNAME optional
    (35) captured_lookup -> . LPAREN VARNAME RPAREN
    (36) captured_lookup -> . LPAREN VARNAME RPAREN optional
    (37) captured_optional_lookup -> . LPAREN VARNAME optional RPAREN
    (23) numrange -> . DOT DOT
    (24) numrange -> . NUMBER DOT DOT
    (25) numrange -> . DOT DOT NUMBER
    (26) numrange -> . NUMBER DOT DOT NUMBER
    (38) optional -> . QUESTMARK
    (39) optional -> . QUESTMARK QUESTMARK
    (40) optional -> . QUESTMARK EXCLAMARK

    $end            reduce using rule 3 (oprex -> NEWLINE .)
    INDENT          shift and go to state 23
    STRING          shift and go to state 15
    SLASH           shift and go to state 18
    NUMBER          shift and go to state 8
    VARNAME         shift and go to state 6
    LPAREN          shift and go to state 19
    DOT             shift and go to state 10
    QUESTMARK       shift and go to state 22

    optionalize                    shift and go to state 11
    repeat_N_times                 shift and go to state 4
    captured_lookup                shift and go to state 14
    expression                     shift and go to state 24
    captured_optional_lookup       shift and go to state 12
    repeat_range                   shift and go to state 7
    optional                       shift and go to state 21
    simple_lookup                  shift and go to state 16
    numrange                       shift and go to state 17
    repeat_expr                    shift and go to state 5
    lookup                         shift and go to state 13
    quantifier                     shift and go to state 20
    lookup_expr                    shift and go to state 9
    string_expr                    shift and go to state 25

state 4

    (14) quantifier -> repeat_N_times .

    WHITESPACE      reduce using rule 14 (quantifier -> repeat_N_times .)
    COLON           reduce using rule 14 (quantifier -> repeat_N_times .)


state 5

    (6) expression -> repeat_expr .

    $end            reduce using rule 6 (expression -> repeat_expr .)
    DEDENT          reduce using rule 6 (expression -> repeat_expr .)
    GLOBALMARK      reduce using rule 6 (expression -> repeat_expr .)
    VARNAME         reduce using rule 6 (expression -> repeat_expr .)


state 6

    (33) simple_lookup -> VARNAME .
    (34) simple_lookup -> VARNAME . optional
    (38) optional -> . QUESTMARK
    (39) optional -> . QUESTMARK QUESTMARK
    (40) optional -> . QUESTMARK EXCLAMARK

    NEWLINE         reduce using rule 33 (simple_lookup -> VARNAME .)
    SLASH           reduce using rule 33 (simple_lookup -> VARNAME .)
    QUESTMARK       shift and go to state 22

    optional                       shift and go to state 26

state 7

    (15) quantifier -> repeat_range .

    WHITESPACE      reduce using rule 15 (quantifier -> repeat_range .)
    COLON           reduce using rule 15 (quantifier -> repeat_range .)


state 8

    (17) repeat_N_times -> NUMBER . of
    (20) repeat_range -> NUMBER . WHITESPACE BACKTRACK PLUS DOT DOT of
    (21) repeat_range -> NUMBER . WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of
    (24) numrange -> NUMBER . DOT DOT
    (26) numrange -> NUMBER . DOT DOT NUMBER
    (27) of -> . WHITESPACE VARNAME

    WHITESPACE      shift and go to state 27
    DOT             shift and go to state 29

    of                             shift and go to state 28

state 9

    (8) expression -> lookup_expr .

    $end            reduce using rule 8 (expression -> lookup_expr .)
    DEDENT          reduce using rule 8 (expression -> lookup_expr .)
    GLOBALMARK      reduce using rule 8 (expression -> lookup_expr .)
    VARNAME         reduce using rule 8 (expression -> lookup_expr .)


state 10

    (23) numrange -> DOT . DOT
    (25) numrange -> DOT . DOT NUMBER

    DOT             shift and go to state 30


state 11

    (16) quantifier -> optionalize .

    WHITESPACE      reduce using rule 16 (quantifier -> optionalize .)
    COLON           reduce using rule 16 (quantifier -> optionalize .)


state 12

    (32) lookup -> captured_optional_lookup .

    SLASH           reduce using rule 32 (lookup -> captured_optional_lookup .)
    NEWLINE         reduce using rule 32 (lookup -> captured_optional_lookup .)


state 13

    (12) lookup_expr -> lookup . NEWLINE optional_block

    NEWLINE         shift and go to state 31


state 14

    (31) lookup -> captured_lookup .

    SLASH           reduce using rule 31 (lookup -> captured_lookup .)
    NEWLINE         reduce using rule 31 (lookup -> captured_lookup .)


state 15

    (11) string_expr -> STRING . NEWLINE optional_block

    NEWLINE         shift and go to state 32


state 16

    (30) lookup -> simple_lookup .

    SLASH           reduce using rule 30 (lookup -> simple_lookup .)
    NEWLINE         reduce using rule 30 (lookup -> simple_lookup .)


state 17

    (18) repeat_range -> numrange . of
    (19) repeat_range -> numrange . WHITESPACE BACKTRACK MINUS of
    (27) of -> . WHITESPACE VARNAME

    WHITESPACE      shift and go to state 33

    of                             shift and go to state 34

state 18

    (13) lookup_expr -> SLASH . lookup_chain NEWLINE optional_block
    (28) lookup_chain -> . lookup SLASH
    (29) lookup_chain -> . lookup SLASH lookup_chain
    (30) lookup -> . simple_lookup
    (31) lookup -> . captured_lookup
    (32) lookup -> . captured_optional_lookup
    (33) simple_lookup -> . VARNAME
    (34) simple_lookup -> . VARNAME optional
    (35) captured_lookup -> . LPAREN VARNAME RPAREN
    (36) captured_lookup -> . LPAREN VARNAME RPAREN optional
    (37) captured_optional_lookup -> . LPAREN VARNAME optional RPAREN

    VARNAME         shift and go to state 6
    LPAREN          shift and go to state 19

    captured_lookup                shift and go to state 14
    captured_optional_lookup       shift and go to state 12
    simple_lookup                  shift and go to state 16
    lookup                         shift and go to state 35
    lookup_chain                   shift and go to state 36

state 19

    (35) captured_lookup -> LPAREN . VARNAME RPAREN
    (36) captured_lookup -> LPAREN . VARNAME RPAREN optional
    (37) captured_optional_lookup -> LPAREN . VARNAME optional RPAREN

    VARNAME         shift and go to state 37


state 20

    (9) repeat_expr -> quantifier . WHITESPACE expression
    (10) repeat_expr -> quantifier . COLON charclass

    WHITESPACE      shift and go to state 39
    COLON           shift and go to state 38


state 21

    (22) optionalize -> optional . of
    (27) of -> . WHITESPACE VARNAME

    WHITESPACE      shift and go to state 41

    of                             shift and go to state 40

state 22

    (38) optional -> QUESTMARK .
    (39) optional -> QUESTMARK . QUESTMARK
    (40) optional -> QUESTMARK . EXCLAMARK

    WHITESPACE      reduce using rule 38 (optional -> QUESTMARK .)
    RPAREN          reduce using rule 38 (optional -> QUESTMARK .)
    NEWLINE         reduce using rule 38 (optional -> QUESTMARK .)
    SLASH           reduce using rule 38 (optional -> QUESTMARK .)
    QUESTMARK       shift and go to state 42
    EXCLAMARK       shift and go to state 43


state 23

    (5) oprex -> NEWLINE INDENT . expression DEDENT
    (6) expression -> . repeat_expr
    (7) expression -> . string_expr
    (8) expression -> . lookup_expr
    (9) repeat_expr -> . quantifier WHITESPACE expression
    (10) repeat_expr -> . quantifier COLON charclass
    (11) string_expr -> . STRING NEWLINE optional_block
    (12) lookup_expr -> . lookup NEWLINE optional_block
    (13) lookup_expr -> . SLASH lookup_chain NEWLINE optional_block
    (14) quantifier -> . repeat_N_times
    (15) quantifier -> . repeat_range
    (16) quantifier -> . optionalize
    (30) lookup -> . simple_lookup
    (31) lookup -> . captured_lookup
    (32) lookup -> . captured_optional_lookup
    (17) repeat_N_times -> . NUMBER of
    (18) repeat_range -> . numrange of
    (19) repeat_range -> . numrange WHITESPACE BACKTRACK MINUS of
    (20) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of
    (21) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of
    (22) optionalize -> . optional of
    (33) simple_lookup -> . VARNAME
    (34) simple_lookup -> . VARNAME optional
    (35) captured_lookup -> . LPAREN VARNAME RPAREN
    (36) captured_lookup -> . LPAREN VARNAME RPAREN optional
    (37) captured_optional_lookup -> . LPAREN VARNAME optional RPAREN
    (23) numrange -> . DOT DOT
    (24) numrange -> . NUMBER DOT DOT
    (25) numrange -> . DOT DOT NUMBER
    (26) numrange -> . NUMBER DOT DOT NUMBER
    (38) optional -> . QUESTMARK
    (39) optional -> . QUESTMARK QUESTMARK
    (40) optional -> . QUESTMARK EXCLAMARK

    STRING          shift and go to state 15
    SLASH           shift and go to state 18
    NUMBER          shift and go to state 8
    VARNAME         shift and go to state 6
    LPAREN          shift and go to state 19
    DOT             shift and go to state 10
    QUESTMARK       shift and go to state 22

    optionalize                    shift and go to state 11
    repeat_N_times                 shift and go to state 4
    captured_lookup                shift and go to state 14
    expression                     shift and go to state 44
    captured_optional_lookup       shift and go to state 12
    repeat_range                   shift and go to state 7
    optional                       shift and go to state 21
    simple_lookup                  shift and go to state 16
    numrange                       shift and go to state 17
    repeat_expr                    shift and go to state 5
    lookup                         shift and go to state 13
    quantifier                     shift and go to state 20
    lookup_expr                    shift and go to state 9
    string_expr                    shift and go to state 25

state 24

    (4) oprex -> NEWLINE expression .

    $end            reduce using rule 4 (oprex -> NEWLINE expression .)


state 25

    (7) expression -> string_expr .

    $end            reduce using rule 7 (expression -> string_expr .)
    DEDENT          reduce using rule 7 (expression -> string_expr .)
    GLOBALMARK      reduce using rule 7 (expression -> string_expr .)
    VARNAME         reduce using rule 7 (expression -> string_expr .)


state 26

    (34) simple_lookup -> VARNAME optional .

    NEWLINE         reduce using rule 34 (simple_lookup -> VARNAME optional .)
    SLASH           reduce using rule 34 (simple_lookup -> VARNAME optional .)


state 27

    (20) repeat_range -> NUMBER WHITESPACE . BACKTRACK PLUS DOT DOT of
    (21) repeat_range -> NUMBER WHITESPACE . BACKTRACK PLUS DOT DOT NUMBER of
    (27) of -> WHITESPACE . VARNAME

    BACKTRACK       shift and go to state 45
    VARNAME         shift and go to state 46


state 28

    (17) repeat_N_times -> NUMBER of .

    WHITESPACE      reduce using rule 17 (repeat_N_times -> NUMBER of .)
    COLON           reduce using rule 17 (repeat_N_times -> NUMBER of .)


state 29

    (24) numrange -> NUMBER DOT . DOT
    (26) numrange -> NUMBER DOT . DOT NUMBER

    DOT             shift and go to state 47


state 30

    (23) numrange -> DOT DOT .
    (25) numrange -> DOT DOT . NUMBER

    WHITESPACE      reduce using rule 23 (numrange -> DOT DOT .)
    NUMBER          shift and go to state 48


state 31

    (12) lookup_expr -> lookup NEWLINE . optional_block
    (41) optional_block -> . begin_block definitions end_block
    (42) optional_block -> .
    (43) begin_block -> . INDENT

    $end            reduce using rule 42 (optional_block -> .)
    DEDENT          reduce using rule 42 (optional_block -> .)
    GLOBALMARK      reduce using rule 42 (optional_block -> .)
    VARNAME         reduce using rule 42 (optional_block -> .)
    INDENT          shift and go to state 50

    optional_block                 shift and go to state 51
    begin_block                    shift and go to state 49

state 32

    (11) string_expr -> STRING NEWLINE . optional_block
    (41) optional_block -> . begin_block definitions end_block
    (42) optional_block -> .
    (43) begin_block -> . INDENT

    $end            reduce using rule 42 (optional_block -> .)
    DEDENT          reduce using rule 42 (optional_block -> .)
    GLOBALMARK      reduce using rule 42 (optional_block -> .)
    VARNAME         reduce using rule 42 (optional_block -> .)
    INDENT          shift and go to state 50

    begin_block                    shift and go to state 49
    optional_block                 shift and go to state 52

state 33

    (19) repeat_range -> numrange WHITESPACE . BACKTRACK MINUS of
    (27) of -> WHITESPACE . VARNAME

    BACKTRACK       shift and go to state 53
    VARNAME         shift and go to state 46


state 34

    (18) repeat_range -> numrange of .

    WHITESPACE      reduce using rule 18 (repeat_range -> numrange of .)
    COLON           reduce using rule 18 (repeat_range -> numrange of .)


state 35

    (28) lookup_chain -> lookup . SLASH
    (29) lookup_chain -> lookup . SLASH lookup_chain

    SLASH           shift and go to state 54


state 36

    (13) lookup_expr -> SLASH lookup_chain . NEWLINE optional_block

    NEWLINE         shift and go to state 55


state 37

    (35) captured_lookup -> LPAREN VARNAME . RPAREN
    (36) captured_lookup -> LPAREN VARNAME . RPAREN optional
    (37) captured_optional_lookup -> LPAREN VARNAME . optional RPAREN
    (38) optional -> . QUESTMARK
    (39) optional -> . QUESTMARK QUESTMARK
    (40) optional -> . QUESTMARK EXCLAMARK

    RPAREN          shift and go to state 56
    QUESTMARK       shift and go to state 22

    optional                       shift and go to state 57

state 38

    (10) repeat_expr -> quantifier COLON . charclass
    (52) charclass -> . CHARCLASS NEWLINE optional_block

    CHARCLASS       shift and go to state 59

    charclass                      shift and go to state 58

state 39

    (9) repeat_expr -> quantifier WHITESPACE . expression
    (6) expression -> . repeat_expr
    (7) expression -> . string_expr
    (8) expression -> . lookup_expr
    (9) repeat_expr -> . quantifier WHITESPACE expression
    (10) repeat_expr -> . quantifier COLON charclass
    (11) string_expr -> . STRING NEWLINE optional_block
    (12) lookup_expr -> . lookup NEWLINE optional_block
    (13) lookup_expr -> . SLASH lookup_chain NEWLINE optional_block
    (14) quantifier -> . repeat_N_times
    (15) quantifier -> . repeat_range
    (16) quantifier -> . optionalize
    (30) lookup -> . simple_lookup
    (31) lookup -> . captured_lookup
    (32) lookup -> . captured_optional_lookup
    (17) repeat_N_times -> . NUMBER of
    (18) repeat_range -> . numrange of
    (19) repeat_range -> . numrange WHITESPACE BACKTRACK MINUS of
    (20) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of
    (21) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of
    (22) optionalize -> . optional of
    (33) simple_lookup -> . VARNAME
    (34) simple_lookup -> . VARNAME optional
    (35) captured_lookup -> . LPAREN VARNAME RPAREN
    (36) captured_lookup -> . LPAREN VARNAME RPAREN optional
    (37) captured_optional_lookup -> . LPAREN VARNAME optional RPAREN
    (23) numrange -> . DOT DOT
    (24) numrange -> . NUMBER DOT DOT
    (25) numrange -> . DOT DOT NUMBER
    (26) numrange -> . NUMBER DOT DOT NUMBER
    (38) optional -> . QUESTMARK
    (39) optional -> . QUESTMARK QUESTMARK
    (40) optional -> . QUESTMARK EXCLAMARK

    STRING          shift and go to state 15
    SLASH           shift and go to state 18
    NUMBER          shift and go to state 8
    VARNAME         shift and go to state 6
    LPAREN          shift and go to state 19
    DOT             shift and go to state 10
    QUESTMARK       shift and go to state 22

    optionalize                    shift and go to state 11
    repeat_N_times                 shift and go to state 4
    captured_lookup                shift and go to state 14
    expression                     shift and go to state 60
    captured_optional_lookup       shift and go to state 12
    repeat_range                   shift and go to state 7
    optional                       shift and go to state 21
    simple_lookup                  shift and go to state 16
    numrange                       shift and go to state 17
    repeat_expr                    shift and go to state 5
    lookup                         shift and go to state 13
    quantifier                     shift and go to state 20
    lookup_expr                    shift and go to state 9
    string_expr                    shift and go to state 25

state 40

    (22) optionalize -> optional of .

    WHITESPACE      reduce using rule 22 (optionalize -> optional of .)
    COLON           reduce using rule 22 (optionalize -> optional of .)


state 41

    (27) of -> WHITESPACE . VARNAME

    VARNAME         shift and go to state 46


state 42

    (39) optional -> QUESTMARK QUESTMARK .

    WHITESPACE      reduce using rule 39 (optional -> QUESTMARK QUESTMARK .)
    RPAREN          reduce using rule 39 (optional -> QUESTMARK QUESTMARK .)
    NEWLINE         reduce using rule 39 (optional -> QUESTMARK QUESTMARK .)
    SLASH           reduce using rule 39 (optional -> QUESTMARK QUESTMARK .)


state 43

    (40) optional -> QUESTMARK EXCLAMARK .

    WHITESPACE      reduce using rule 40 (optional -> QUESTMARK EXCLAMARK .)
    RPAREN          reduce using rule 40 (optional -> QUESTMARK EXCLAMARK .)
    NEWLINE         reduce using rule 40 (optional -> QUESTMARK EXCLAMARK .)
    SLASH           reduce using rule 40 (optional -> QUESTMARK EXCLAMARK .)


state 44

    (5) oprex -> NEWLINE INDENT expression . DEDENT

    DEDENT          shift and go to state 61


state 45

    (20) repeat_range -> NUMBER WHITESPACE BACKTRACK . PLUS DOT DOT of
    (21) repeat_range -> NUMBER WHITESPACE BACKTRACK . PLUS DOT DOT NUMBER of

    PLUS            shift and go to state 62


state 46

    (27) of -> WHITESPACE VARNAME .

    WHITESPACE      reduce using rule 27 (of -> WHITESPACE VARNAME .)
    COLON           reduce using rule 27 (of -> WHITESPACE VARNAME .)


state 47

    (24) numrange -> NUMBER DOT DOT .
    (26) numrange -> NUMBER DOT DOT . NUMBER

    WHITESPACE      reduce using rule 24 (numrange -> NUMBER DOT DOT .)
    NUMBER          shift and go to state 63


state 48

    (25) numrange -> DOT DOT NUMBER .

    WHITESPACE      reduce using rule 25 (numrange -> DOT DOT NUMBER .)


state 49

    (41) optional_block -> begin_block . definitions end_block
    (45) definitions -> . definition
    (46) definitions -> . definition definitions
    (47) definition -> . assignment
    (48) definition -> . GLOBALMARK assignment
    (49) assignment -> . VARNAME EQUALSIGN assignment
    (50) assignment -> . VARNAME EQUALSIGN expression
    (51) assignment -> . VARNAME COLON charclass

    GLOBALMARK      shift and go to state 66
    VARNAME         shift and go to state 67

    definition                     shift and go to state 64
    assignment                     shift and go to state 65
    definitions                    shift and go to state 68

state 50

    (43) begin_block -> INDENT .

    GLOBALMARK      reduce using rule 43 (begin_block -> INDENT .)
    VARNAME         reduce using rule 43 (begin_block -> INDENT .)


state 51

    (12) lookup_expr -> lookup NEWLINE optional_block .

    DEDENT          reduce using rule 12 (lookup_expr -> lookup NEWLINE optional_block .)
    GLOBALMARK      reduce using rule 12 (lookup_expr -> lookup NEWLINE optional_block .)
    VARNAME         reduce using rule 12 (lookup_expr -> lookup NEWLINE optional_block .)
    $end            reduce using rule 12 (lookup_expr -> lookup NEWLINE optional_block .)


state 52

    (11) string_expr -> STRING NEWLINE optional_block .

    $end            reduce using rule 11 (string_expr -> STRING NEWLINE optional_block .)
    GLOBALMARK      reduce using rule 11 (string_expr -> STRING NEWLINE optional_block .)
    VARNAME         reduce using rule 11 (string_expr -> STRING NEWLINE optional_block .)
    DEDENT          reduce using rule 11 (string_expr -> STRING NEWLINE optional_block .)


state 53

    (19) repeat_range -> numrange WHITESPACE BACKTRACK . MINUS of

    MINUS           shift and go to state 69


state 54

    (28) lookup_chain -> lookup SLASH .
    (29) lookup_chain -> lookup SLASH . lookup_chain
    (28) lookup_chain -> . lookup SLASH
    (29) lookup_chain -> . lookup SLASH lookup_chain
    (30) lookup -> . simple_lookup
    (31) lookup -> . captured_lookup
    (32) lookup -> . captured_optional_lookup
    (33) simple_lookup -> . VARNAME
    (34) simple_lookup -> . VARNAME optional
    (35) captured_lookup -> . LPAREN VARNAME RPAREN
    (36) captured_lookup -> . LPAREN VARNAME RPAREN optional
    (37) captured_optional_lookup -> . LPAREN VARNAME optional RPAREN

    NEWLINE         reduce using rule 28 (lookup_chain -> lookup SLASH .)
    VARNAME         shift and go to state 6
    LPAREN          shift and go to state 19

    captured_lookup                shift and go to state 14
    captured_optional_lookup       shift and go to state 12
    simple_lookup                  shift and go to state 16
    lookup                         shift and go to state 35
    lookup_chain                   shift and go to state 70

state 55

    (13) lookup_expr -> SLASH lookup_chain NEWLINE . optional_block
    (41) optional_block -> . begin_block definitions end_block
    (42) optional_block -> .
    (43) begin_block -> . INDENT

    $end            reduce using rule 42 (optional_block -> .)
    DEDENT          reduce using rule 42 (optional_block -> .)
    GLOBALMARK      reduce using rule 42 (optional_block -> .)
    VARNAME         reduce using rule 42 (optional_block -> .)
    INDENT          shift and go to state 50

    optional_block                 shift and go to state 71
    begin_block                    shift and go to state 49

state 56

    (35) captured_lookup -> LPAREN VARNAME RPAREN .
    (36) captured_lookup -> LPAREN VARNAME RPAREN . optional
    (38) optional -> . QUESTMARK
    (39) optional -> . QUESTMARK QUESTMARK
    (40) optional -> . QUESTMARK EXCLAMARK

    NEWLINE         reduce using rule 35 (captured_lookup -> LPAREN VARNAME RPAREN .)
    SLASH           reduce using rule 35 (captured_lookup -> LPAREN VARNAME RPAREN .)
    QUESTMARK       shift and go to state 22

    optional                       shift and go to state 72

state 57

    (37) captured_optional_lookup -> LPAREN VARNAME optional . RPAREN

    RPAREN          shift and go to state 73


state 58

    (10) repeat_expr -> quantifier COLON charclass .

    DEDENT          reduce using rule 10 (repeat_expr -> quantifier COLON charclass .)
    $end            reduce using rule 10 (repeat_expr -> quantifier COLON charclass .)
    GLOBALMARK      reduce using rule 10 (repeat_expr -> quantifier COLON charclass .)
    VARNAME         reduce using rule 10 (repeat_expr -> quantifier COLON charclass .)


state 59

    (52) charclass -> CHARCLASS . NEWLINE optional_block

    NEWLINE         shift and go to state 74


state 60

    (9) repeat_expr -> quantifier WHITESPACE expression .

    DEDENT          reduce using rule 9 (repeat_expr -> quantifier WHITESPACE expression .)
    $end            reduce using rule 9 (repeat_expr -> quantifier WHITESPACE expression .)
    GLOBALMARK      reduce using rule 9 (repeat_expr -> quantifier WHITESPACE expression .)
    VARNAME         reduce using rule 9 (repeat_expr -> quantifier WHITESPACE expression .)


state 61

    (5) oprex -> NEWLINE INDENT expression DEDENT .

    $end            reduce using rule 5 (oprex -> NEWLINE INDENT expression DEDENT .)


state 62

    (20) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS . DOT DOT of
    (21) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS . DOT DOT NUMBER of

    DOT             shift and go to state 75


state 63

    (26) numrange -> NUMBER DOT DOT NUMBER .

    WHITESPACE      reduce using rule 26 (numrange -> NUMBER DOT DOT NUMBER .)


state 64

    (45) definitions -> definition .
    (46) definitions -> definition . definitions
    (45) definitions -> . definition
    (46) definitions -> . definition definitions
    (47) definition -> . assignment
    (48) definition -> . GLOBALMARK assignment
    (49) assignment -> . VARNAME EQUALSIGN assignment
    (50) assignment -> . VARNAME EQUALSIGN expression
    (51) assignment -> . VARNAME COLON charclass

    DEDENT          reduce using rule 45 (definitions -> definition .)
    GLOBALMARK      shift and go to state 66
    VARNAME         shift and go to state 67

    definition                     shift and go to state 64
    assignment                     shift and go to state 65
    definitions                    shift and go to state 76

state 65

    (47) definition -> assignment .

    GLOBALMARK      reduce using rule 47 (definition -> assignment .)
    VARNAME         reduce using rule 47 (definition -> assignment .)
    DEDENT          reduce using rule 47 (definition -> assignment .)


state 66

    (48) definition -> GLOBALMARK . assignment
    (49) assignment -> . VARNAME EQUALSIGN assignment
    (50) assignment -> . VARNAME EQUALSIGN expression
    (51) assignment -> . VARNAME COLON charclass

    VARNAME         shift and go to state 67

    assignment                     shift and go to state 77

state 67

    (49) assignment -> VARNAME . EQUALSIGN assignment
    (50) assignment -> VARNAME . EQUALSIGN expression
    (51) assignment -> VARNAME . COLON charclass

    EQUALSIGN       shift and go to state 79
    COLON           shift and go to state 78


state 68

    (41) optional_block -> begin_block definitions . end_block
    (44) end_block -> . DEDENT

    DEDENT          shift and go to state 81

    end_block                      shift and go to state 80

state 69

    (19) repeat_range -> numrange WHITESPACE BACKTRACK MINUS . of
    (27) of -> . WHITESPACE VARNAME

    WHITESPACE      shift and go to state 41

    of                             shift and go to state 82

state 70

    (29) lookup_chain -> lookup SLASH lookup_chain .

    NEWLINE         reduce using rule 29 (lookup_chain -> lookup SLASH lookup_chain .)


state 71

    (13) lookup_expr -> SLASH lookup_chain NEWLINE optional_block .

    DEDENT          reduce using rule 13 (lookup_expr -> SLASH lookup_chain NEWLINE optional_block .)
    GLOBALMARK      reduce using rule 13 (lookup_expr -> SLASH lookup_chain NEWLINE optional_block .)
    VARNAME         reduce using rule 13 (lookup_expr -> SLASH lookup_chain NEWLINE optional_block .)
    $end            reduce using rule 13 (lookup_expr -> SLASH lookup_chain NEWLINE optional_block .)


state 72

    (36) captured_lookup -> LPAREN VARNAME RPAREN optional .

    NEWLINE         reduce using rule 36 (captured_lookup -> LPAREN VARNAME RPAREN optional .)
    SLASH           reduce using rule 36 (captured_lookup -> LPAREN VARNAME RPAREN optional .)


state 73

    (37) captured_optional_lookup -> LPAREN VARNAME optional RPAREN .

    NEWLINE         reduce using rule 37 (captured_optional_lookup -> LPAREN VARNAME optional RPAREN .)
    SLASH           reduce using rule 37 (captured_optional_lookup -> LPAREN VARNAME optional RPAREN .)


state 74

    (52) charclass -> CHARCLASS NEWLINE . optional_block
    (41) optional_block -> . begin_block definitions end_block
    (42) optional_block -> .
    (43) begin_block -> . INDENT

    $end            reduce using rule 42 (optional_block -> .)
    DEDENT          reduce using rule 42 (optional_block -> .)
    GLOBALMARK      reduce using rule 42 (optional_block -> .)
    VARNAME         reduce using rule 42 (optional_block -> .)
    INDENT          shift and go to state 50

    begin_block                    shift and go to state 49
    optional_block                 shift and go to state 83

state 75

    (20) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT . DOT of
    (21) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT . DOT NUMBER of

    DOT             shift and go to state 84


state 76

    (46) definitions -> definition definitions .

    DEDENT          reduce using rule 46 (definitions -> definition definitions .)


state 77

    (48) definition -> GLOBALMARK assignment .

    GLOBALMARK      reduce using rule 48 (definition -> GLOBALMARK assignment .)
    VARNAME         reduce using rule 48 (definition -> GLOBALMARK assignment .)
    DEDENT          reduce using rule 48 (definition -> GLOBALMARK assignment .)


state 78

    (51) assignment -> VARNAME COLON . charclass
    (52) charclass -> . CHARCLASS NEWLINE optional_block

    CHARCLASS       shift and go to state 59

    charclass                      shift and go to state 85

state 79

    (49) assignment -> VARNAME EQUALSIGN . assignment
    (50) assignment -> VARNAME EQUALSIGN . expression
    (49) assignment -> . VARNAME EQUALSIGN assignment
    (50) assignment -> . VARNAME EQUALSIGN expression
    (51) assignment -> . VARNAME COLON charclass
    (6) expression -> . repeat_expr
    (7) expression -> . string_expr
    (8) expression -> . lookup_expr
    (9) repeat_expr -> . quantifier WHITESPACE expression
    (10) repeat_expr -> . quantifier COLON charclass
    (11) string_expr -> . STRING NEWLINE optional_block
    (12) lookup_expr -> . lookup NEWLINE optional_block
    (13) lookup_expr -> . SLASH lookup_chain NEWLINE optional_block
    (14) quantifier -> . repeat_N_times
    (15) quantifier -> . repeat_range
    (16) quantifier -> . optionalize
    (30) lookup -> . simple_lookup
    (31) lookup -> . captured_lookup
    (32) lookup -> . captured_optional_lookup
    (17) repeat_N_times -> . NUMBER of
    (18) repeat_range -> . numrange of
    (19) repeat_range -> . numrange WHITESPACE BACKTRACK MINUS of
    (20) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of
    (21) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of
    (22) optionalize -> . optional of
    (33) simple_lookup -> . VARNAME
    (34) simple_lookup -> . VARNAME optional
    (35) captured_lookup -> . LPAREN VARNAME RPAREN
    (36) captured_lookup -> . LPAREN VARNAME RPAREN optional
    (37) captured_optional_lookup -> . LPAREN VARNAME optional RPAREN
    (23) numrange -> . DOT DOT
    (24) numrange -> . NUMBER DOT DOT
    (25) numrange -> . DOT DOT NUMBER
    (26) numrange -> . NUMBER DOT DOT NUMBER
    (38) optional -> . QUESTMARK
    (39) optional -> . QUESTMARK QUESTMARK
    (40) optional -> . QUESTMARK EXCLAMARK

    VARNAME         shift and go to state 86
    STRING          shift and go to state 15
    SLASH           shift and go to state 18
    NUMBER          shift and go to state 8
    LPAREN          shift and go to state 19
    DOT             shift and go to state 10
    QUESTMARK       shift and go to state 22

    optionalize                    shift and go to state 11
    repeat_N_times                 shift and go to state 4
    captured_lookup                shift and go to state 14
    assignment                     shift and go to state 87
    captured_optional_lookup       shift and go to state 12
    repeat_range                   shift and go to state 7
    optional                       shift and go to state 21
    simple_lookup                  shift and go to state 16
    numrange                       shift and go to state 17
    expression                     shift and go to state 88
    repeat_expr                    shift and go to state 5
    lookup                         shift and go to state 13
    quantifier                     shift and go to state 20
    lookup_expr                    shift and go to state 9
    string_expr                    shift and go to state 25

state 80

    (41) optional_block -> begin_block definitions end_block .

    $end            reduce using rule 41 (optional_block -> begin_block definitions end_block .)
    DEDENT          reduce using rule 41 (optional_block -> begin_block definitions end_block .)
    GLOBALMARK      reduce using rule 41 (optional_block -> begin_block definitions end_block .)
    VARNAME         reduce using rule 41 (optional_block -> begin_block definitions end_block .)


state 81

    (44) end_block -> DEDENT .

    $end            reduce using rule 44 (end_block -> DEDENT .)
    DEDENT          reduce using rule 44 (end_block -> DEDENT .)
    GLOBALMARK      reduce using rule 44 (end_block -> DEDENT .)
    VARNAME         reduce using rule 44 (end_block -> DEDENT .)


state 82

    (19) repeat_range -> numrange WHITESPACE BACKTRACK MINUS of .

    WHITESPACE      reduce using rule 19 (repeat_range -> numrange WHITESPACE BACKTRACK MINUS of .)
    COLON           reduce using rule 19 (repeat_range -> numrange WHITESPACE BACKTRACK MINUS of .)


state 83

    (52) charclass -> CHARCLASS NEWLINE optional_block .

    $end            reduce using rule 52 (charclass -> CHARCLASS NEWLINE optional_block .)
    DEDENT          reduce using rule 52 (charclass -> CHARCLASS NEWLINE optional_block .)
    GLOBALMARK      reduce using rule 52 (charclass -> CHARCLASS NEWLINE optional_block .)
    VARNAME         reduce using rule 52 (charclass -> CHARCLASS NEWLINE optional_block .)


state 84

    (20) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT . of
    (21) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT . NUMBER of
    (27) of -> . WHITESPACE VARNAME

    NUMBER          shift and go to state 90
    WHITESPACE      shift and go to state 41

    of                             shift and go to state 89

state 85

    (51) assignment -> VARNAME COLON charclass .

    GLOBALMARK      reduce using rule 51 (assignment -> VARNAME COLON charclass .)
    VARNAME         reduce using rule 51 (assignment -> VARNAME COLON charclass .)
    DEDENT          reduce using rule 51 (assignment -> VARNAME COLON charclass .)


state 86

    (49) assignment -> VARNAME . EQUALSIGN assignment
    (50) assignment -> VARNAME . EQUALSIGN expression
    (51) assignment -> VARNAME . COLON charclass
    (33) simple_lookup -> VARNAME .
    (34) simple_lookup -> VARNAME . optional
    (38) optional -> . QUESTMARK
    (39) optional -> . QUESTMARK QUESTMARK
    (40) optional -> . QUESTMARK EXCLAMARK

    EQUALSIGN       shift and go to state 79
    COLON           shift and go to state 78
    NEWLINE         reduce using rule 33 (simple_lookup -> VARNAME .)
    QUESTMARK       shift and go to state 22

    optional                       shift and go to state 26

state 87

    (49) assignment -> VARNAME EQUALSIGN assignment .

    GLOBALMARK      reduce using rule 49 (assignment -> VARNAME EQUALSIGN assignment .)
    VARNAME         reduce using rule 49 (assignment -> VARNAME EQUALSIGN assignment .)
    DEDENT          reduce using rule 49 (assignment -> VARNAME EQUALSIGN assignment .)


state 88

    (50) assignment -> VARNAME EQUALSIGN expression .

    GLOBALMARK      reduce using rule 50 (assignment -> VARNAME EQUALSIGN expression .)
    VARNAME         reduce using rule 50 (assignment -> VARNAME EQUALSIGN expression .)
    DEDENT          reduce using rule 50 (assignment -> VARNAME EQUALSIGN expression .)


state 89

    (20) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of .

    WHITESPACE      reduce using rule 20 (repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of .)
    COLON           reduce using rule 20 (repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of .)


state 90

    (21) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER . of
    (27) of -> . WHITESPACE VARNAME

    WHITESPACE      shift and go to state 41

    of                             shift and go to state 91

state 91

    (21) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of .

    WHITESPACE      reduce using rule 21 (repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of .)
    COLON           reduce using rule 21 (repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of .)

