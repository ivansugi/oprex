Created by PLY version 3.4 (http://www.dabeaz.com/ply)

Grammar

Rule 0     S' -> oprex
Rule 1     oprex -> <empty>
Rule 2     oprex -> WHITESPACE
Rule 3     oprex -> NEWLINE
Rule 4     oprex -> NEWLINE expression
Rule 5     oprex -> NEWLINE INDENT expression DEDENT
Rule 6     expression -> repeat_expr
Rule 7     expression -> string_expr
Rule 8     expression -> lookup_expr
Rule 9     repeat_expr -> quantifier WHITESPACE expression
Rule 10    repeat_expr -> quantifier COLON charclass
Rule 11    string_expr -> STRING NEWLINE optional_block
Rule 12    lookup_expr -> lookup NEWLINE optional_block
Rule 13    lookup_expr -> SLASH lookup_chain NEWLINE optional_block
Rule 14    quantifier -> repeat_N_times
Rule 15    quantifier -> repeat_range
Rule 16    quantifier -> optionalize
Rule 17    repeat_N_times -> NUMBER of
Rule 18    repeat_range -> numrange of
Rule 19    repeat_range -> numrange WHITESPACE BACKTRACK MINUS of
Rule 20    repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of
Rule 21    repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of
Rule 22    optionalize -> QUESTMARK of
Rule 23    numrange -> DOT DOT
Rule 24    numrange -> NUMBER DOT DOT
Rule 25    numrange -> DOT DOT NUMBER
Rule 26    numrange -> NUMBER DOT DOT NUMBER
Rule 27    of -> WHITESPACE VARNAME
Rule 28    lookup_chain -> lookup SLASH
Rule 29    lookup_chain -> lookup SLASH lookup_chain
Rule 30    lookup -> lookup_type
Rule 31    lookup -> lookup_type QUESTMARK
Rule 32    lookup_type -> variable_lookup
Rule 33    lookup_type -> backreference
Rule 34    lookup_type -> subroutine_call
Rule 35    variable_lookup -> VARNAME
Rule 36    backreference -> VARNAME LPAREN RPAREN
Rule 37    subroutine_call -> AMPERSAND VARNAME
Rule 38    optional_block -> begin_block definitions end_block
Rule 39    optional_block -> <empty>
Rule 40    begin_block -> INDENT
Rule 41    end_block -> DEDENT
Rule 42    definitions -> definition
Rule 43    definitions -> definition definitions
Rule 44    definition -> assignment
Rule 45    definition -> GLOBALMARK assignment
Rule 46    assignment -> declaration EQUALSIGN assignment
Rule 47    assignment -> declaration EQUALSIGN expression
Rule 48    assignment -> declaration COLON charclass
Rule 49    declaration -> VARNAME
Rule 50    declaration -> DOT VARNAME
Rule 51    declaration -> LPAREN VARNAME RPAREN
Rule 52    declaration -> DOT LPAREN VARNAME RPAREN
Rule 53    charclass -> CHARCLASS NEWLINE optional_block

Terminals, with rules where they appear

AMPERSAND            : 37
BACKTRACK            : 19 20 21
CHARCLASS            : 53
COLON                : 10 48
DEDENT               : 5 41
DOT                  : 20 20 21 21 23 23 24 24 25 25 26 26 50 52
EQUALSIGN            : 46 47
GLOBALMARK           : 45
INDENT               : 5 40
LPAREN               : 36 51 52
MINUS                : 19
NEWLINE              : 3 4 5 11 12 13 53
NUMBER               : 17 20 21 21 24 25 26 26
PLUS                 : 20 21
QUESTMARK            : 22 31
RPAREN               : 36 51 52
SLASH                : 13 28 29
STRING               : 11
VARNAME              : 27 35 36 37 49 50 51 52
WHITESPACE           : 2 9 19 20 21 27
error                : 

Nonterminals, with rules where they appear

assignment           : 44 45 46
backreference        : 33
begin_block          : 38
charclass            : 10 48
declaration          : 46 47 48
definition           : 42 43
definitions          : 38 43
end_block            : 38
expression           : 4 5 9 47
lookup               : 12 28 29
lookup_chain         : 13 29
lookup_expr          : 8
lookup_type          : 30 31
numrange             : 18 19
of                   : 17 18 19 20 21 22
oprex                : 0
optional_block       : 11 12 13 53
optionalize          : 16
quantifier           : 9 10
repeat_N_times       : 14
repeat_expr          : 6
repeat_range         : 15
string_expr          : 7
subroutine_call      : 34
variable_lookup      : 32

Parsing method: LALR

state 0

    (0) S' -> . oprex
    (1) oprex -> .
    (2) oprex -> . WHITESPACE
    (3) oprex -> . NEWLINE
    (4) oprex -> . NEWLINE expression
    (5) oprex -> . NEWLINE INDENT expression DEDENT

    $end            reduce using rule 1 (oprex -> .)
    WHITESPACE      shift and go to state 2
    NEWLINE         shift and go to state 3

    oprex                          shift and go to state 1

state 1

    (0) S' -> oprex .



state 2

    (2) oprex -> WHITESPACE .

    $end            reduce using rule 2 (oprex -> WHITESPACE .)


state 3

    (3) oprex -> NEWLINE .
    (4) oprex -> NEWLINE . expression
    (5) oprex -> NEWLINE . INDENT expression DEDENT
    (6) expression -> . repeat_expr
    (7) expression -> . string_expr
    (8) expression -> . lookup_expr
    (9) repeat_expr -> . quantifier WHITESPACE expression
    (10) repeat_expr -> . quantifier COLON charclass
    (11) string_expr -> . STRING NEWLINE optional_block
    (12) lookup_expr -> . lookup NEWLINE optional_block
    (13) lookup_expr -> . SLASH lookup_chain NEWLINE optional_block
    (14) quantifier -> . repeat_N_times
    (15) quantifier -> . repeat_range
    (16) quantifier -> . optionalize
    (30) lookup -> . lookup_type
    (31) lookup -> . lookup_type QUESTMARK
    (17) repeat_N_times -> . NUMBER of
    (18) repeat_range -> . numrange of
    (19) repeat_range -> . numrange WHITESPACE BACKTRACK MINUS of
    (20) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of
    (21) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of
    (22) optionalize -> . QUESTMARK of
    (32) lookup_type -> . variable_lookup
    (33) lookup_type -> . backreference
    (34) lookup_type -> . subroutine_call
    (23) numrange -> . DOT DOT
    (24) numrange -> . NUMBER DOT DOT
    (25) numrange -> . DOT DOT NUMBER
    (26) numrange -> . NUMBER DOT DOT NUMBER
    (35) variable_lookup -> . VARNAME
    (36) backreference -> . VARNAME LPAREN RPAREN
    (37) subroutine_call -> . AMPERSAND VARNAME

    $end            reduce using rule 3 (oprex -> NEWLINE .)
    INDENT          shift and go to state 21
    STRING          shift and go to state 15
    SLASH           shift and go to state 18
    NUMBER          shift and go to state 9
    QUESTMARK       shift and go to state 20
    DOT             shift and go to state 11
    VARNAME         shift and go to state 6
    AMPERSAND       shift and go to state 17

    optionalize                    shift and go to state 12
    repeat_N_times                 shift and go to state 4
    expression                     shift and go to state 23
    lookup_type                    shift and go to state 22
    repeat_range                   shift and go to state 7
    backreference                  shift and go to state 8
    numrange                       shift and go to state 16
    repeat_expr                    shift and go to state 5
    lookup                         shift and go to state 13
    quantifier                     shift and go to state 19
    lookup_expr                    shift and go to state 10
    string_expr                    shift and go to state 24
    subroutine_call                shift and go to state 14
    variable_lookup                shift and go to state 25

state 4

    (14) quantifier -> repeat_N_times .

    WHITESPACE      reduce using rule 14 (quantifier -> repeat_N_times .)
    COLON           reduce using rule 14 (quantifier -> repeat_N_times .)


state 5

    (6) expression -> repeat_expr .

    $end            reduce using rule 6 (expression -> repeat_expr .)
    DEDENT          reduce using rule 6 (expression -> repeat_expr .)
    GLOBALMARK      reduce using rule 6 (expression -> repeat_expr .)
    VARNAME         reduce using rule 6 (expression -> repeat_expr .)
    DOT             reduce using rule 6 (expression -> repeat_expr .)
    LPAREN          reduce using rule 6 (expression -> repeat_expr .)


state 6

    (35) variable_lookup -> VARNAME .
    (36) backreference -> VARNAME . LPAREN RPAREN

    QUESTMARK       reduce using rule 35 (variable_lookup -> VARNAME .)
    NEWLINE         reduce using rule 35 (variable_lookup -> VARNAME .)
    SLASH           reduce using rule 35 (variable_lookup -> VARNAME .)
    LPAREN          shift and go to state 26


state 7

    (15) quantifier -> repeat_range .

    WHITESPACE      reduce using rule 15 (quantifier -> repeat_range .)
    COLON           reduce using rule 15 (quantifier -> repeat_range .)


state 8

    (33) lookup_type -> backreference .

    QUESTMARK       reduce using rule 33 (lookup_type -> backreference .)
    NEWLINE         reduce using rule 33 (lookup_type -> backreference .)
    SLASH           reduce using rule 33 (lookup_type -> backreference .)


state 9

    (17) repeat_N_times -> NUMBER . of
    (20) repeat_range -> NUMBER . WHITESPACE BACKTRACK PLUS DOT DOT of
    (21) repeat_range -> NUMBER . WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of
    (24) numrange -> NUMBER . DOT DOT
    (26) numrange -> NUMBER . DOT DOT NUMBER
    (27) of -> . WHITESPACE VARNAME

    WHITESPACE      shift and go to state 27
    DOT             shift and go to state 29

    of                             shift and go to state 28

state 10

    (8) expression -> lookup_expr .

    $end            reduce using rule 8 (expression -> lookup_expr .)
    DEDENT          reduce using rule 8 (expression -> lookup_expr .)
    GLOBALMARK      reduce using rule 8 (expression -> lookup_expr .)
    VARNAME         reduce using rule 8 (expression -> lookup_expr .)
    DOT             reduce using rule 8 (expression -> lookup_expr .)
    LPAREN          reduce using rule 8 (expression -> lookup_expr .)


state 11

    (23) numrange -> DOT . DOT
    (25) numrange -> DOT . DOT NUMBER

    DOT             shift and go to state 30


state 12

    (16) quantifier -> optionalize .

    WHITESPACE      reduce using rule 16 (quantifier -> optionalize .)
    COLON           reduce using rule 16 (quantifier -> optionalize .)


state 13

    (12) lookup_expr -> lookup . NEWLINE optional_block

    NEWLINE         shift and go to state 31


state 14

    (34) lookup_type -> subroutine_call .

    QUESTMARK       reduce using rule 34 (lookup_type -> subroutine_call .)
    NEWLINE         reduce using rule 34 (lookup_type -> subroutine_call .)
    SLASH           reduce using rule 34 (lookup_type -> subroutine_call .)


state 15

    (11) string_expr -> STRING . NEWLINE optional_block

    NEWLINE         shift and go to state 32


state 16

    (18) repeat_range -> numrange . of
    (19) repeat_range -> numrange . WHITESPACE BACKTRACK MINUS of
    (27) of -> . WHITESPACE VARNAME

    WHITESPACE      shift and go to state 33

    of                             shift and go to state 34

state 17

    (37) subroutine_call -> AMPERSAND . VARNAME

    VARNAME         shift and go to state 35


state 18

    (13) lookup_expr -> SLASH . lookup_chain NEWLINE optional_block
    (28) lookup_chain -> . lookup SLASH
    (29) lookup_chain -> . lookup SLASH lookup_chain
    (30) lookup -> . lookup_type
    (31) lookup -> . lookup_type QUESTMARK
    (32) lookup_type -> . variable_lookup
    (33) lookup_type -> . backreference
    (34) lookup_type -> . subroutine_call
    (35) variable_lookup -> . VARNAME
    (36) backreference -> . VARNAME LPAREN RPAREN
    (37) subroutine_call -> . AMPERSAND VARNAME

    VARNAME         shift and go to state 6
    AMPERSAND       shift and go to state 17

    lookup_type                    shift and go to state 22
    backreference                  shift and go to state 8
    lookup                         shift and go to state 36
    subroutine_call                shift and go to state 14
    lookup_chain                   shift and go to state 37
    variable_lookup                shift and go to state 25

state 19

    (9) repeat_expr -> quantifier . WHITESPACE expression
    (10) repeat_expr -> quantifier . COLON charclass

    WHITESPACE      shift and go to state 39
    COLON           shift and go to state 38


state 20

    (22) optionalize -> QUESTMARK . of
    (27) of -> . WHITESPACE VARNAME

    WHITESPACE      shift and go to state 41

    of                             shift and go to state 40

state 21

    (5) oprex -> NEWLINE INDENT . expression DEDENT
    (6) expression -> . repeat_expr
    (7) expression -> . string_expr
    (8) expression -> . lookup_expr
    (9) repeat_expr -> . quantifier WHITESPACE expression
    (10) repeat_expr -> . quantifier COLON charclass
    (11) string_expr -> . STRING NEWLINE optional_block
    (12) lookup_expr -> . lookup NEWLINE optional_block
    (13) lookup_expr -> . SLASH lookup_chain NEWLINE optional_block
    (14) quantifier -> . repeat_N_times
    (15) quantifier -> . repeat_range
    (16) quantifier -> . optionalize
    (30) lookup -> . lookup_type
    (31) lookup -> . lookup_type QUESTMARK
    (17) repeat_N_times -> . NUMBER of
    (18) repeat_range -> . numrange of
    (19) repeat_range -> . numrange WHITESPACE BACKTRACK MINUS of
    (20) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of
    (21) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of
    (22) optionalize -> . QUESTMARK of
    (32) lookup_type -> . variable_lookup
    (33) lookup_type -> . backreference
    (34) lookup_type -> . subroutine_call
    (23) numrange -> . DOT DOT
    (24) numrange -> . NUMBER DOT DOT
    (25) numrange -> . DOT DOT NUMBER
    (26) numrange -> . NUMBER DOT DOT NUMBER
    (35) variable_lookup -> . VARNAME
    (36) backreference -> . VARNAME LPAREN RPAREN
    (37) subroutine_call -> . AMPERSAND VARNAME

    STRING          shift and go to state 15
    SLASH           shift and go to state 18
    NUMBER          shift and go to state 9
    QUESTMARK       shift and go to state 20
    DOT             shift and go to state 11
    VARNAME         shift and go to state 6
    AMPERSAND       shift and go to state 17

    optionalize                    shift and go to state 12
    repeat_N_times                 shift and go to state 4
    expression                     shift and go to state 42
    lookup_type                    shift and go to state 22
    repeat_range                   shift and go to state 7
    backreference                  shift and go to state 8
    numrange                       shift and go to state 16
    repeat_expr                    shift and go to state 5
    lookup                         shift and go to state 13
    quantifier                     shift and go to state 19
    lookup_expr                    shift and go to state 10
    string_expr                    shift and go to state 24
    subroutine_call                shift and go to state 14
    variable_lookup                shift and go to state 25

state 22

    (30) lookup -> lookup_type .
    (31) lookup -> lookup_type . QUESTMARK

    SLASH           reduce using rule 30 (lookup -> lookup_type .)
    NEWLINE         reduce using rule 30 (lookup -> lookup_type .)
    QUESTMARK       shift and go to state 43


state 23

    (4) oprex -> NEWLINE expression .

    $end            reduce using rule 4 (oprex -> NEWLINE expression .)


state 24

    (7) expression -> string_expr .

    $end            reduce using rule 7 (expression -> string_expr .)
    DEDENT          reduce using rule 7 (expression -> string_expr .)
    GLOBALMARK      reduce using rule 7 (expression -> string_expr .)
    VARNAME         reduce using rule 7 (expression -> string_expr .)
    DOT             reduce using rule 7 (expression -> string_expr .)
    LPAREN          reduce using rule 7 (expression -> string_expr .)


state 25

    (32) lookup_type -> variable_lookup .

    QUESTMARK       reduce using rule 32 (lookup_type -> variable_lookup .)
    NEWLINE         reduce using rule 32 (lookup_type -> variable_lookup .)
    SLASH           reduce using rule 32 (lookup_type -> variable_lookup .)


state 26

    (36) backreference -> VARNAME LPAREN . RPAREN

    RPAREN          shift and go to state 44


state 27

    (20) repeat_range -> NUMBER WHITESPACE . BACKTRACK PLUS DOT DOT of
    (21) repeat_range -> NUMBER WHITESPACE . BACKTRACK PLUS DOT DOT NUMBER of
    (27) of -> WHITESPACE . VARNAME

    BACKTRACK       shift and go to state 45
    VARNAME         shift and go to state 46


state 28

    (17) repeat_N_times -> NUMBER of .

    WHITESPACE      reduce using rule 17 (repeat_N_times -> NUMBER of .)
    COLON           reduce using rule 17 (repeat_N_times -> NUMBER of .)


state 29

    (24) numrange -> NUMBER DOT . DOT
    (26) numrange -> NUMBER DOT . DOT NUMBER

    DOT             shift and go to state 47


state 30

    (23) numrange -> DOT DOT .
    (25) numrange -> DOT DOT . NUMBER

    WHITESPACE      reduce using rule 23 (numrange -> DOT DOT .)
    NUMBER          shift and go to state 48


state 31

    (12) lookup_expr -> lookup NEWLINE . optional_block
    (38) optional_block -> . begin_block definitions end_block
    (39) optional_block -> .
    (40) begin_block -> . INDENT

    $end            reduce using rule 39 (optional_block -> .)
    DEDENT          reduce using rule 39 (optional_block -> .)
    GLOBALMARK      reduce using rule 39 (optional_block -> .)
    VARNAME         reduce using rule 39 (optional_block -> .)
    DOT             reduce using rule 39 (optional_block -> .)
    LPAREN          reduce using rule 39 (optional_block -> .)
    INDENT          shift and go to state 50

    optional_block                 shift and go to state 51
    begin_block                    shift and go to state 49

state 32

    (11) string_expr -> STRING NEWLINE . optional_block
    (38) optional_block -> . begin_block definitions end_block
    (39) optional_block -> .
    (40) begin_block -> . INDENT

    $end            reduce using rule 39 (optional_block -> .)
    DEDENT          reduce using rule 39 (optional_block -> .)
    GLOBALMARK      reduce using rule 39 (optional_block -> .)
    VARNAME         reduce using rule 39 (optional_block -> .)
    DOT             reduce using rule 39 (optional_block -> .)
    LPAREN          reduce using rule 39 (optional_block -> .)
    INDENT          shift and go to state 50

    begin_block                    shift and go to state 49
    optional_block                 shift and go to state 52

state 33

    (19) repeat_range -> numrange WHITESPACE . BACKTRACK MINUS of
    (27) of -> WHITESPACE . VARNAME

    BACKTRACK       shift and go to state 53
    VARNAME         shift and go to state 46


state 34

    (18) repeat_range -> numrange of .

    WHITESPACE      reduce using rule 18 (repeat_range -> numrange of .)
    COLON           reduce using rule 18 (repeat_range -> numrange of .)


state 35

    (37) subroutine_call -> AMPERSAND VARNAME .

    QUESTMARK       reduce using rule 37 (subroutine_call -> AMPERSAND VARNAME .)
    NEWLINE         reduce using rule 37 (subroutine_call -> AMPERSAND VARNAME .)
    SLASH           reduce using rule 37 (subroutine_call -> AMPERSAND VARNAME .)


state 36

    (28) lookup_chain -> lookup . SLASH
    (29) lookup_chain -> lookup . SLASH lookup_chain

    SLASH           shift and go to state 54


state 37

    (13) lookup_expr -> SLASH lookup_chain . NEWLINE optional_block

    NEWLINE         shift and go to state 55


state 38

    (10) repeat_expr -> quantifier COLON . charclass
    (53) charclass -> . CHARCLASS NEWLINE optional_block

    CHARCLASS       shift and go to state 57

    charclass                      shift and go to state 56

state 39

    (9) repeat_expr -> quantifier WHITESPACE . expression
    (6) expression -> . repeat_expr
    (7) expression -> . string_expr
    (8) expression -> . lookup_expr
    (9) repeat_expr -> . quantifier WHITESPACE expression
    (10) repeat_expr -> . quantifier COLON charclass
    (11) string_expr -> . STRING NEWLINE optional_block
    (12) lookup_expr -> . lookup NEWLINE optional_block
    (13) lookup_expr -> . SLASH lookup_chain NEWLINE optional_block
    (14) quantifier -> . repeat_N_times
    (15) quantifier -> . repeat_range
    (16) quantifier -> . optionalize
    (30) lookup -> . lookup_type
    (31) lookup -> . lookup_type QUESTMARK
    (17) repeat_N_times -> . NUMBER of
    (18) repeat_range -> . numrange of
    (19) repeat_range -> . numrange WHITESPACE BACKTRACK MINUS of
    (20) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of
    (21) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of
    (22) optionalize -> . QUESTMARK of
    (32) lookup_type -> . variable_lookup
    (33) lookup_type -> . backreference
    (34) lookup_type -> . subroutine_call
    (23) numrange -> . DOT DOT
    (24) numrange -> . NUMBER DOT DOT
    (25) numrange -> . DOT DOT NUMBER
    (26) numrange -> . NUMBER DOT DOT NUMBER
    (35) variable_lookup -> . VARNAME
    (36) backreference -> . VARNAME LPAREN RPAREN
    (37) subroutine_call -> . AMPERSAND VARNAME

    STRING          shift and go to state 15
    SLASH           shift and go to state 18
    NUMBER          shift and go to state 9
    QUESTMARK       shift and go to state 20
    DOT             shift and go to state 11
    VARNAME         shift and go to state 6
    AMPERSAND       shift and go to state 17

    optionalize                    shift and go to state 12
    repeat_N_times                 shift and go to state 4
    expression                     shift and go to state 58
    lookup_type                    shift and go to state 22
    repeat_range                   shift and go to state 7
    backreference                  shift and go to state 8
    numrange                       shift and go to state 16
    repeat_expr                    shift and go to state 5
    lookup                         shift and go to state 13
    quantifier                     shift and go to state 19
    lookup_expr                    shift and go to state 10
    string_expr                    shift and go to state 24
    subroutine_call                shift and go to state 14
    variable_lookup                shift and go to state 25

state 40

    (22) optionalize -> QUESTMARK of .

    WHITESPACE      reduce using rule 22 (optionalize -> QUESTMARK of .)
    COLON           reduce using rule 22 (optionalize -> QUESTMARK of .)


state 41

    (27) of -> WHITESPACE . VARNAME

    VARNAME         shift and go to state 46


state 42

    (5) oprex -> NEWLINE INDENT expression . DEDENT

    DEDENT          shift and go to state 59


state 43

    (31) lookup -> lookup_type QUESTMARK .

    SLASH           reduce using rule 31 (lookup -> lookup_type QUESTMARK .)
    NEWLINE         reduce using rule 31 (lookup -> lookup_type QUESTMARK .)


state 44

    (36) backreference -> VARNAME LPAREN RPAREN .

    QUESTMARK       reduce using rule 36 (backreference -> VARNAME LPAREN RPAREN .)
    SLASH           reduce using rule 36 (backreference -> VARNAME LPAREN RPAREN .)
    NEWLINE         reduce using rule 36 (backreference -> VARNAME LPAREN RPAREN .)


state 45

    (20) repeat_range -> NUMBER WHITESPACE BACKTRACK . PLUS DOT DOT of
    (21) repeat_range -> NUMBER WHITESPACE BACKTRACK . PLUS DOT DOT NUMBER of

    PLUS            shift and go to state 60


state 46

    (27) of -> WHITESPACE VARNAME .

    WHITESPACE      reduce using rule 27 (of -> WHITESPACE VARNAME .)
    COLON           reduce using rule 27 (of -> WHITESPACE VARNAME .)


state 47

    (24) numrange -> NUMBER DOT DOT .
    (26) numrange -> NUMBER DOT DOT . NUMBER

    WHITESPACE      reduce using rule 24 (numrange -> NUMBER DOT DOT .)
    NUMBER          shift and go to state 61


state 48

    (25) numrange -> DOT DOT NUMBER .

    WHITESPACE      reduce using rule 25 (numrange -> DOT DOT NUMBER .)


state 49

    (38) optional_block -> begin_block . definitions end_block
    (42) definitions -> . definition
    (43) definitions -> . definition definitions
    (44) definition -> . assignment
    (45) definition -> . GLOBALMARK assignment
    (46) assignment -> . declaration EQUALSIGN assignment
    (47) assignment -> . declaration EQUALSIGN expression
    (48) assignment -> . declaration COLON charclass
    (49) declaration -> . VARNAME
    (50) declaration -> . DOT VARNAME
    (51) declaration -> . LPAREN VARNAME RPAREN
    (52) declaration -> . DOT LPAREN VARNAME RPAREN

    GLOBALMARK      shift and go to state 64
    VARNAME         shift and go to state 65
    DOT             shift and go to state 69
    LPAREN          shift and go to state 66

    definition                     shift and go to state 62
    assignment                     shift and go to state 63
    declaration                    shift and go to state 67
    definitions                    shift and go to state 68

state 50

    (40) begin_block -> INDENT .

    GLOBALMARK      reduce using rule 40 (begin_block -> INDENT .)
    VARNAME         reduce using rule 40 (begin_block -> INDENT .)
    DOT             reduce using rule 40 (begin_block -> INDENT .)
    LPAREN          reduce using rule 40 (begin_block -> INDENT .)


state 51

    (12) lookup_expr -> lookup NEWLINE optional_block .

    $end            reduce using rule 12 (lookup_expr -> lookup NEWLINE optional_block .)
    DEDENT          reduce using rule 12 (lookup_expr -> lookup NEWLINE optional_block .)
    GLOBALMARK      reduce using rule 12 (lookup_expr -> lookup NEWLINE optional_block .)
    VARNAME         reduce using rule 12 (lookup_expr -> lookup NEWLINE optional_block .)
    DOT             reduce using rule 12 (lookup_expr -> lookup NEWLINE optional_block .)
    LPAREN          reduce using rule 12 (lookup_expr -> lookup NEWLINE optional_block .)


state 52

    (11) string_expr -> STRING NEWLINE optional_block .

    DEDENT          reduce using rule 11 (string_expr -> STRING NEWLINE optional_block .)
    $end            reduce using rule 11 (string_expr -> STRING NEWLINE optional_block .)
    GLOBALMARK      reduce using rule 11 (string_expr -> STRING NEWLINE optional_block .)
    VARNAME         reduce using rule 11 (string_expr -> STRING NEWLINE optional_block .)
    DOT             reduce using rule 11 (string_expr -> STRING NEWLINE optional_block .)
    LPAREN          reduce using rule 11 (string_expr -> STRING NEWLINE optional_block .)


state 53

    (19) repeat_range -> numrange WHITESPACE BACKTRACK . MINUS of

    MINUS           shift and go to state 70


state 54

    (28) lookup_chain -> lookup SLASH .
    (29) lookup_chain -> lookup SLASH . lookup_chain
    (28) lookup_chain -> . lookup SLASH
    (29) lookup_chain -> . lookup SLASH lookup_chain
    (30) lookup -> . lookup_type
    (31) lookup -> . lookup_type QUESTMARK
    (32) lookup_type -> . variable_lookup
    (33) lookup_type -> . backreference
    (34) lookup_type -> . subroutine_call
    (35) variable_lookup -> . VARNAME
    (36) backreference -> . VARNAME LPAREN RPAREN
    (37) subroutine_call -> . AMPERSAND VARNAME

    NEWLINE         reduce using rule 28 (lookup_chain -> lookup SLASH .)
    VARNAME         shift and go to state 6
    AMPERSAND       shift and go to state 17

    lookup_type                    shift and go to state 22
    backreference                  shift and go to state 8
    lookup                         shift and go to state 36
    subroutine_call                shift and go to state 14
    lookup_chain                   shift and go to state 71
    variable_lookup                shift and go to state 25

state 55

    (13) lookup_expr -> SLASH lookup_chain NEWLINE . optional_block
    (38) optional_block -> . begin_block definitions end_block
    (39) optional_block -> .
    (40) begin_block -> . INDENT

    $end            reduce using rule 39 (optional_block -> .)
    DEDENT          reduce using rule 39 (optional_block -> .)
    GLOBALMARK      reduce using rule 39 (optional_block -> .)
    VARNAME         reduce using rule 39 (optional_block -> .)
    DOT             reduce using rule 39 (optional_block -> .)
    LPAREN          reduce using rule 39 (optional_block -> .)
    INDENT          shift and go to state 50

    optional_block                 shift and go to state 72
    begin_block                    shift and go to state 49

state 56

    (10) repeat_expr -> quantifier COLON charclass .

    DEDENT          reduce using rule 10 (repeat_expr -> quantifier COLON charclass .)
    $end            reduce using rule 10 (repeat_expr -> quantifier COLON charclass .)
    GLOBALMARK      reduce using rule 10 (repeat_expr -> quantifier COLON charclass .)
    VARNAME         reduce using rule 10 (repeat_expr -> quantifier COLON charclass .)
    DOT             reduce using rule 10 (repeat_expr -> quantifier COLON charclass .)
    LPAREN          reduce using rule 10 (repeat_expr -> quantifier COLON charclass .)


state 57

    (53) charclass -> CHARCLASS . NEWLINE optional_block

    NEWLINE         shift and go to state 73


state 58

    (9) repeat_expr -> quantifier WHITESPACE expression .

    DEDENT          reduce using rule 9 (repeat_expr -> quantifier WHITESPACE expression .)
    $end            reduce using rule 9 (repeat_expr -> quantifier WHITESPACE expression .)
    GLOBALMARK      reduce using rule 9 (repeat_expr -> quantifier WHITESPACE expression .)
    VARNAME         reduce using rule 9 (repeat_expr -> quantifier WHITESPACE expression .)
    DOT             reduce using rule 9 (repeat_expr -> quantifier WHITESPACE expression .)
    LPAREN          reduce using rule 9 (repeat_expr -> quantifier WHITESPACE expression .)


state 59

    (5) oprex -> NEWLINE INDENT expression DEDENT .

    $end            reduce using rule 5 (oprex -> NEWLINE INDENT expression DEDENT .)


state 60

    (20) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS . DOT DOT of
    (21) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS . DOT DOT NUMBER of

    DOT             shift and go to state 74


state 61

    (26) numrange -> NUMBER DOT DOT NUMBER .

    WHITESPACE      reduce using rule 26 (numrange -> NUMBER DOT DOT NUMBER .)


state 62

    (42) definitions -> definition .
    (43) definitions -> definition . definitions
    (42) definitions -> . definition
    (43) definitions -> . definition definitions
    (44) definition -> . assignment
    (45) definition -> . GLOBALMARK assignment
    (46) assignment -> . declaration EQUALSIGN assignment
    (47) assignment -> . declaration EQUALSIGN expression
    (48) assignment -> . declaration COLON charclass
    (49) declaration -> . VARNAME
    (50) declaration -> . DOT VARNAME
    (51) declaration -> . LPAREN VARNAME RPAREN
    (52) declaration -> . DOT LPAREN VARNAME RPAREN

    DEDENT          reduce using rule 42 (definitions -> definition .)
    GLOBALMARK      shift and go to state 64
    VARNAME         shift and go to state 65
    DOT             shift and go to state 69
    LPAREN          shift and go to state 66

    definition                     shift and go to state 62
    assignment                     shift and go to state 63
    declaration                    shift and go to state 67
    definitions                    shift and go to state 75

state 63

    (44) definition -> assignment .

    GLOBALMARK      reduce using rule 44 (definition -> assignment .)
    VARNAME         reduce using rule 44 (definition -> assignment .)
    DOT             reduce using rule 44 (definition -> assignment .)
    LPAREN          reduce using rule 44 (definition -> assignment .)
    DEDENT          reduce using rule 44 (definition -> assignment .)


state 64

    (45) definition -> GLOBALMARK . assignment
    (46) assignment -> . declaration EQUALSIGN assignment
    (47) assignment -> . declaration EQUALSIGN expression
    (48) assignment -> . declaration COLON charclass
    (49) declaration -> . VARNAME
    (50) declaration -> . DOT VARNAME
    (51) declaration -> . LPAREN VARNAME RPAREN
    (52) declaration -> . DOT LPAREN VARNAME RPAREN

    VARNAME         shift and go to state 65
    DOT             shift and go to state 69
    LPAREN          shift and go to state 66

    assignment                     shift and go to state 76
    declaration                    shift and go to state 67

state 65

    (49) declaration -> VARNAME .

    EQUALSIGN       reduce using rule 49 (declaration -> VARNAME .)
    COLON           reduce using rule 49 (declaration -> VARNAME .)


state 66

    (51) declaration -> LPAREN . VARNAME RPAREN

    VARNAME         shift and go to state 77


state 67

    (46) assignment -> declaration . EQUALSIGN assignment
    (47) assignment -> declaration . EQUALSIGN expression
    (48) assignment -> declaration . COLON charclass

    EQUALSIGN       shift and go to state 79
    COLON           shift and go to state 78


state 68

    (38) optional_block -> begin_block definitions . end_block
    (41) end_block -> . DEDENT

    DEDENT          shift and go to state 81

    end_block                      shift and go to state 80

state 69

    (50) declaration -> DOT . VARNAME
    (52) declaration -> DOT . LPAREN VARNAME RPAREN

    VARNAME         shift and go to state 82
    LPAREN          shift and go to state 83


state 70

    (19) repeat_range -> numrange WHITESPACE BACKTRACK MINUS . of
    (27) of -> . WHITESPACE VARNAME

    WHITESPACE      shift and go to state 41

    of                             shift and go to state 84

state 71

    (29) lookup_chain -> lookup SLASH lookup_chain .

    NEWLINE         reduce using rule 29 (lookup_chain -> lookup SLASH lookup_chain .)


state 72

    (13) lookup_expr -> SLASH lookup_chain NEWLINE optional_block .

    $end            reduce using rule 13 (lookup_expr -> SLASH lookup_chain NEWLINE optional_block .)
    DEDENT          reduce using rule 13 (lookup_expr -> SLASH lookup_chain NEWLINE optional_block .)
    GLOBALMARK      reduce using rule 13 (lookup_expr -> SLASH lookup_chain NEWLINE optional_block .)
    VARNAME         reduce using rule 13 (lookup_expr -> SLASH lookup_chain NEWLINE optional_block .)
    DOT             reduce using rule 13 (lookup_expr -> SLASH lookup_chain NEWLINE optional_block .)
    LPAREN          reduce using rule 13 (lookup_expr -> SLASH lookup_chain NEWLINE optional_block .)


state 73

    (53) charclass -> CHARCLASS NEWLINE . optional_block
    (38) optional_block -> . begin_block definitions end_block
    (39) optional_block -> .
    (40) begin_block -> . INDENT

    $end            reduce using rule 39 (optional_block -> .)
    DEDENT          reduce using rule 39 (optional_block -> .)
    GLOBALMARK      reduce using rule 39 (optional_block -> .)
    VARNAME         reduce using rule 39 (optional_block -> .)
    DOT             reduce using rule 39 (optional_block -> .)
    LPAREN          reduce using rule 39 (optional_block -> .)
    INDENT          shift and go to state 50

    begin_block                    shift and go to state 49
    optional_block                 shift and go to state 85

state 74

    (20) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT . DOT of
    (21) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT . DOT NUMBER of

    DOT             shift and go to state 86


state 75

    (43) definitions -> definition definitions .

    DEDENT          reduce using rule 43 (definitions -> definition definitions .)


state 76

    (45) definition -> GLOBALMARK assignment .

    GLOBALMARK      reduce using rule 45 (definition -> GLOBALMARK assignment .)
    VARNAME         reduce using rule 45 (definition -> GLOBALMARK assignment .)
    DOT             reduce using rule 45 (definition -> GLOBALMARK assignment .)
    LPAREN          reduce using rule 45 (definition -> GLOBALMARK assignment .)
    DEDENT          reduce using rule 45 (definition -> GLOBALMARK assignment .)


state 77

    (51) declaration -> LPAREN VARNAME . RPAREN

    RPAREN          shift and go to state 87


state 78

    (48) assignment -> declaration COLON . charclass
    (53) charclass -> . CHARCLASS NEWLINE optional_block

    CHARCLASS       shift and go to state 57

    charclass                      shift and go to state 88

state 79

    (46) assignment -> declaration EQUALSIGN . assignment
    (47) assignment -> declaration EQUALSIGN . expression
    (46) assignment -> . declaration EQUALSIGN assignment
    (47) assignment -> . declaration EQUALSIGN expression
    (48) assignment -> . declaration COLON charclass
    (6) expression -> . repeat_expr
    (7) expression -> . string_expr
    (8) expression -> . lookup_expr
    (49) declaration -> . VARNAME
    (50) declaration -> . DOT VARNAME
    (51) declaration -> . LPAREN VARNAME RPAREN
    (52) declaration -> . DOT LPAREN VARNAME RPAREN
    (9) repeat_expr -> . quantifier WHITESPACE expression
    (10) repeat_expr -> . quantifier COLON charclass
    (11) string_expr -> . STRING NEWLINE optional_block
    (12) lookup_expr -> . lookup NEWLINE optional_block
    (13) lookup_expr -> . SLASH lookup_chain NEWLINE optional_block
    (14) quantifier -> . repeat_N_times
    (15) quantifier -> . repeat_range
    (16) quantifier -> . optionalize
    (30) lookup -> . lookup_type
    (31) lookup -> . lookup_type QUESTMARK
    (17) repeat_N_times -> . NUMBER of
    (18) repeat_range -> . numrange of
    (19) repeat_range -> . numrange WHITESPACE BACKTRACK MINUS of
    (20) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of
    (21) repeat_range -> . NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of
    (22) optionalize -> . QUESTMARK of
    (32) lookup_type -> . variable_lookup
    (33) lookup_type -> . backreference
    (34) lookup_type -> . subroutine_call
    (23) numrange -> . DOT DOT
    (24) numrange -> . NUMBER DOT DOT
    (25) numrange -> . DOT DOT NUMBER
    (26) numrange -> . NUMBER DOT DOT NUMBER
    (35) variable_lookup -> . VARNAME
    (36) backreference -> . VARNAME LPAREN RPAREN
    (37) subroutine_call -> . AMPERSAND VARNAME

    VARNAME         shift and go to state 89
    DOT             shift and go to state 90
    LPAREN          shift and go to state 66
    STRING          shift and go to state 15
    SLASH           shift and go to state 18
    NUMBER          shift and go to state 9
    QUESTMARK       shift and go to state 20
    AMPERSAND       shift and go to state 17

    optionalize                    shift and go to state 12
    repeat_N_times                 shift and go to state 4
    assignment                     shift and go to state 91
    lookup_type                    shift and go to state 22
    repeat_range                   shift and go to state 7
    backreference                  shift and go to state 8
    numrange                       shift and go to state 16
    expression                     shift and go to state 92
    repeat_expr                    shift and go to state 5
    declaration                    shift and go to state 67
    lookup                         shift and go to state 13
    quantifier                     shift and go to state 19
    lookup_expr                    shift and go to state 10
    string_expr                    shift and go to state 24
    subroutine_call                shift and go to state 14
    variable_lookup                shift and go to state 25

state 80

    (38) optional_block -> begin_block definitions end_block .

    $end            reduce using rule 38 (optional_block -> begin_block definitions end_block .)
    DEDENT          reduce using rule 38 (optional_block -> begin_block definitions end_block .)
    GLOBALMARK      reduce using rule 38 (optional_block -> begin_block definitions end_block .)
    VARNAME         reduce using rule 38 (optional_block -> begin_block definitions end_block .)
    DOT             reduce using rule 38 (optional_block -> begin_block definitions end_block .)
    LPAREN          reduce using rule 38 (optional_block -> begin_block definitions end_block .)


state 81

    (41) end_block -> DEDENT .

    $end            reduce using rule 41 (end_block -> DEDENT .)
    DEDENT          reduce using rule 41 (end_block -> DEDENT .)
    GLOBALMARK      reduce using rule 41 (end_block -> DEDENT .)
    VARNAME         reduce using rule 41 (end_block -> DEDENT .)
    DOT             reduce using rule 41 (end_block -> DEDENT .)
    LPAREN          reduce using rule 41 (end_block -> DEDENT .)


state 82

    (50) declaration -> DOT VARNAME .

    EQUALSIGN       reduce using rule 50 (declaration -> DOT VARNAME .)
    COLON           reduce using rule 50 (declaration -> DOT VARNAME .)


state 83

    (52) declaration -> DOT LPAREN . VARNAME RPAREN

    VARNAME         shift and go to state 93


state 84

    (19) repeat_range -> numrange WHITESPACE BACKTRACK MINUS of .

    WHITESPACE      reduce using rule 19 (repeat_range -> numrange WHITESPACE BACKTRACK MINUS of .)
    COLON           reduce using rule 19 (repeat_range -> numrange WHITESPACE BACKTRACK MINUS of .)


state 85

    (53) charclass -> CHARCLASS NEWLINE optional_block .

    $end            reduce using rule 53 (charclass -> CHARCLASS NEWLINE optional_block .)
    DEDENT          reduce using rule 53 (charclass -> CHARCLASS NEWLINE optional_block .)
    GLOBALMARK      reduce using rule 53 (charclass -> CHARCLASS NEWLINE optional_block .)
    VARNAME         reduce using rule 53 (charclass -> CHARCLASS NEWLINE optional_block .)
    DOT             reduce using rule 53 (charclass -> CHARCLASS NEWLINE optional_block .)
    LPAREN          reduce using rule 53 (charclass -> CHARCLASS NEWLINE optional_block .)


state 86

    (20) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT . of
    (21) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT . NUMBER of
    (27) of -> . WHITESPACE VARNAME

    NUMBER          shift and go to state 95
    WHITESPACE      shift and go to state 41

    of                             shift and go to state 94

state 87

    (51) declaration -> LPAREN VARNAME RPAREN .

    EQUALSIGN       reduce using rule 51 (declaration -> LPAREN VARNAME RPAREN .)
    COLON           reduce using rule 51 (declaration -> LPAREN VARNAME RPAREN .)


state 88

    (48) assignment -> declaration COLON charclass .

    GLOBALMARK      reduce using rule 48 (assignment -> declaration COLON charclass .)
    VARNAME         reduce using rule 48 (assignment -> declaration COLON charclass .)
    DOT             reduce using rule 48 (assignment -> declaration COLON charclass .)
    LPAREN          reduce using rule 48 (assignment -> declaration COLON charclass .)
    DEDENT          reduce using rule 48 (assignment -> declaration COLON charclass .)


state 89

    (49) declaration -> VARNAME .
    (35) variable_lookup -> VARNAME .
    (36) backreference -> VARNAME . LPAREN RPAREN

    EQUALSIGN       reduce using rule 49 (declaration -> VARNAME .)
    COLON           reduce using rule 49 (declaration -> VARNAME .)
    QUESTMARK       reduce using rule 35 (variable_lookup -> VARNAME .)
    NEWLINE         reduce using rule 35 (variable_lookup -> VARNAME .)
    LPAREN          shift and go to state 26


state 90

    (50) declaration -> DOT . VARNAME
    (52) declaration -> DOT . LPAREN VARNAME RPAREN
    (23) numrange -> DOT . DOT
    (25) numrange -> DOT . DOT NUMBER

    VARNAME         shift and go to state 82
    LPAREN          shift and go to state 83
    DOT             shift and go to state 30


state 91

    (46) assignment -> declaration EQUALSIGN assignment .

    GLOBALMARK      reduce using rule 46 (assignment -> declaration EQUALSIGN assignment .)
    VARNAME         reduce using rule 46 (assignment -> declaration EQUALSIGN assignment .)
    DOT             reduce using rule 46 (assignment -> declaration EQUALSIGN assignment .)
    LPAREN          reduce using rule 46 (assignment -> declaration EQUALSIGN assignment .)
    DEDENT          reduce using rule 46 (assignment -> declaration EQUALSIGN assignment .)


state 92

    (47) assignment -> declaration EQUALSIGN expression .

    GLOBALMARK      reduce using rule 47 (assignment -> declaration EQUALSIGN expression .)
    VARNAME         reduce using rule 47 (assignment -> declaration EQUALSIGN expression .)
    DOT             reduce using rule 47 (assignment -> declaration EQUALSIGN expression .)
    LPAREN          reduce using rule 47 (assignment -> declaration EQUALSIGN expression .)
    DEDENT          reduce using rule 47 (assignment -> declaration EQUALSIGN expression .)


state 93

    (52) declaration -> DOT LPAREN VARNAME . RPAREN

    RPAREN          shift and go to state 96


state 94

    (20) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of .

    WHITESPACE      reduce using rule 20 (repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of .)
    COLON           reduce using rule 20 (repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT of .)


state 95

    (21) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER . of
    (27) of -> . WHITESPACE VARNAME

    WHITESPACE      shift and go to state 41

    of                             shift and go to state 97

state 96

    (52) declaration -> DOT LPAREN VARNAME RPAREN .

    EQUALSIGN       reduce using rule 52 (declaration -> DOT LPAREN VARNAME RPAREN .)
    COLON           reduce using rule 52 (declaration -> DOT LPAREN VARNAME RPAREN .)


state 97

    (21) repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of .

    WHITESPACE      reduce using rule 21 (repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of .)
    COLON           reduce using rule 21 (repeat_range -> NUMBER WHITESPACE BACKTRACK PLUS DOT DOT NUMBER of .)

