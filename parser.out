Created by PLY version 3.4 (http://www.dabeaz.com/ply)

Grammar

Rule 0     S' -> oprex
Rule 1     oprex -> <empty>
Rule 2     oprex -> WHITESPACE
Rule 3     oprex -> NEWLINE
Rule 4     oprex -> NEWLINE expression
Rule 5     oprex -> NEWLINE BEGINSCOPE expression ENDSCOPE
Rule 6     expression -> lookup NEWLINE
Rule 7     expression -> lookup NEWLINE beginscope definitions ENDSCOPE
Rule 8     lookup -> VARNAME
Rule 9     lookup -> SLASH cells
Rule 10    cells -> cell SLASH
Rule 11    cells -> cell SLASH cells
Rule 12    cell -> VARNAME
Rule 13    cell -> VARNAME QUESTMARK
Rule 14    cell -> OPENPAREN VARNAME CLOSEPAREN
Rule 15    cell -> OPENPAREN VARNAME CLOSEPAREN QUESTMARK
Rule 16    cell -> OPENPAREN VARNAME QUESTMARK CLOSEPAREN
Rule 17    beginscope -> BEGINSCOPE
Rule 18    definitions -> definition
Rule 19    definitions -> definition definitions
Rule 20    definition -> assignment
Rule 21    definition -> GLOBALMARK assignment
Rule 22    assignment -> VARNAME EQUALSIGN assignment
Rule 23    assignment -> VARNAME EQUALSIGN expression
Rule 24    assignment -> VARNAME EQUALSIGN LITERAL NEWLINE
Rule 25    assignment -> VARNAME COLON CHARCLASS NEWLINE

Terminals, with rules where they appear

BEGINSCOPE           : 5 17
CHARCLASS            : 25
CLOSEPAREN           : 14 15 16
COLON                : 25
ENDSCOPE             : 5 7
EQUALSIGN            : 22 23 24
GLOBALMARK           : 21
LITERAL              : 24
NEWLINE              : 3 4 5 6 7 24 25
OPENPAREN            : 14 15 16
QUESTMARK            : 13 15 16
SLASH                : 9 10 11
VARNAME              : 8 12 13 14 15 16 22 23 24 25
WHITESPACE           : 2
error                : 

Nonterminals, with rules where they appear

assignment           : 20 21 22
beginscope           : 7
cell                 : 10 11
cells                : 9 11
definition           : 18 19
definitions          : 7 19
expression           : 4 5 23
lookup               : 6 7
oprex                : 0

Parsing method: LALR

state 0

    (0) S' -> . oprex
    (1) oprex -> .
    (2) oprex -> . WHITESPACE
    (3) oprex -> . NEWLINE
    (4) oprex -> . NEWLINE expression
    (5) oprex -> . NEWLINE BEGINSCOPE expression ENDSCOPE

    $end            reduce using rule 1 (oprex -> .)
    WHITESPACE      shift and go to state 1
    NEWLINE         shift and go to state 2

    oprex                          shift and go to state 3

state 1

    (2) oprex -> WHITESPACE .

    $end            reduce using rule 2 (oprex -> WHITESPACE .)


state 2

    (3) oprex -> NEWLINE .
    (4) oprex -> NEWLINE . expression
    (5) oprex -> NEWLINE . BEGINSCOPE expression ENDSCOPE
    (6) expression -> . lookup NEWLINE
    (7) expression -> . lookup NEWLINE beginscope definitions ENDSCOPE
    (8) lookup -> . VARNAME
    (9) lookup -> . SLASH cells

    $end            reduce using rule 3 (oprex -> NEWLINE .)
    BEGINSCOPE      shift and go to state 4
    VARNAME         shift and go to state 5
    SLASH           shift and go to state 7

    lookup                         shift and go to state 6
    expression                     shift and go to state 8

state 3

    (0) S' -> oprex .



state 4

    (5) oprex -> NEWLINE BEGINSCOPE . expression ENDSCOPE
    (6) expression -> . lookup NEWLINE
    (7) expression -> . lookup NEWLINE beginscope definitions ENDSCOPE
    (8) lookup -> . VARNAME
    (9) lookup -> . SLASH cells

    VARNAME         shift and go to state 5
    SLASH           shift and go to state 7

    lookup                         shift and go to state 6
    expression                     shift and go to state 9

state 5

    (8) lookup -> VARNAME .

    NEWLINE         reduce using rule 8 (lookup -> VARNAME .)


state 6

    (6) expression -> lookup . NEWLINE
    (7) expression -> lookup . NEWLINE beginscope definitions ENDSCOPE

    NEWLINE         shift and go to state 10


state 7

    (9) lookup -> SLASH . cells
    (10) cells -> . cell SLASH
    (11) cells -> . cell SLASH cells
    (12) cell -> . VARNAME
    (13) cell -> . VARNAME QUESTMARK
    (14) cell -> . OPENPAREN VARNAME CLOSEPAREN
    (15) cell -> . OPENPAREN VARNAME CLOSEPAREN QUESTMARK
    (16) cell -> . OPENPAREN VARNAME QUESTMARK CLOSEPAREN

    VARNAME         shift and go to state 11
    OPENPAREN       shift and go to state 14

    cell                           shift and go to state 13
    cells                          shift and go to state 12

state 8

    (4) oprex -> NEWLINE expression .

    $end            reduce using rule 4 (oprex -> NEWLINE expression .)


state 9

    (5) oprex -> NEWLINE BEGINSCOPE expression . ENDSCOPE

    ENDSCOPE        shift and go to state 15


state 10

    (6) expression -> lookup NEWLINE .
    (7) expression -> lookup NEWLINE . beginscope definitions ENDSCOPE
    (17) beginscope -> . BEGINSCOPE

    ENDSCOPE        reduce using rule 6 (expression -> lookup NEWLINE .)
    GLOBALMARK      reduce using rule 6 (expression -> lookup NEWLINE .)
    VARNAME         reduce using rule 6 (expression -> lookup NEWLINE .)
    $end            reduce using rule 6 (expression -> lookup NEWLINE .)
    BEGINSCOPE      shift and go to state 16

    beginscope                     shift and go to state 17

state 11

    (12) cell -> VARNAME .
    (13) cell -> VARNAME . QUESTMARK

    SLASH           reduce using rule 12 (cell -> VARNAME .)
    QUESTMARK       shift and go to state 18


state 12

    (9) lookup -> SLASH cells .

    NEWLINE         reduce using rule 9 (lookup -> SLASH cells .)


state 13

    (10) cells -> cell . SLASH
    (11) cells -> cell . SLASH cells

    SLASH           shift and go to state 19


state 14

    (14) cell -> OPENPAREN . VARNAME CLOSEPAREN
    (15) cell -> OPENPAREN . VARNAME CLOSEPAREN QUESTMARK
    (16) cell -> OPENPAREN . VARNAME QUESTMARK CLOSEPAREN

    VARNAME         shift and go to state 20


state 15

    (5) oprex -> NEWLINE BEGINSCOPE expression ENDSCOPE .

    $end            reduce using rule 5 (oprex -> NEWLINE BEGINSCOPE expression ENDSCOPE .)


state 16

    (17) beginscope -> BEGINSCOPE .

    GLOBALMARK      reduce using rule 17 (beginscope -> BEGINSCOPE .)
    VARNAME         reduce using rule 17 (beginscope -> BEGINSCOPE .)


state 17

    (7) expression -> lookup NEWLINE beginscope . definitions ENDSCOPE
    (18) definitions -> . definition
    (19) definitions -> . definition definitions
    (20) definition -> . assignment
    (21) definition -> . GLOBALMARK assignment
    (22) assignment -> . VARNAME EQUALSIGN assignment
    (23) assignment -> . VARNAME EQUALSIGN expression
    (24) assignment -> . VARNAME EQUALSIGN LITERAL NEWLINE
    (25) assignment -> . VARNAME COLON CHARCLASS NEWLINE

    GLOBALMARK      shift and go to state 23
    VARNAME         shift and go to state 24

    definition                     shift and go to state 21
    assignment                     shift and go to state 22
    definitions                    shift and go to state 25

state 18

    (13) cell -> VARNAME QUESTMARK .

    SLASH           reduce using rule 13 (cell -> VARNAME QUESTMARK .)


state 19

    (10) cells -> cell SLASH .
    (11) cells -> cell SLASH . cells
    (10) cells -> . cell SLASH
    (11) cells -> . cell SLASH cells
    (12) cell -> . VARNAME
    (13) cell -> . VARNAME QUESTMARK
    (14) cell -> . OPENPAREN VARNAME CLOSEPAREN
    (15) cell -> . OPENPAREN VARNAME CLOSEPAREN QUESTMARK
    (16) cell -> . OPENPAREN VARNAME QUESTMARK CLOSEPAREN

    NEWLINE         reduce using rule 10 (cells -> cell SLASH .)
    VARNAME         shift and go to state 11
    OPENPAREN       shift and go to state 14

    cell                           shift and go to state 13
    cells                          shift and go to state 26

state 20

    (14) cell -> OPENPAREN VARNAME . CLOSEPAREN
    (15) cell -> OPENPAREN VARNAME . CLOSEPAREN QUESTMARK
    (16) cell -> OPENPAREN VARNAME . QUESTMARK CLOSEPAREN

    CLOSEPAREN      shift and go to state 28
    QUESTMARK       shift and go to state 27


state 21

    (18) definitions -> definition .
    (19) definitions -> definition . definitions
    (18) definitions -> . definition
    (19) definitions -> . definition definitions
    (20) definition -> . assignment
    (21) definition -> . GLOBALMARK assignment
    (22) assignment -> . VARNAME EQUALSIGN assignment
    (23) assignment -> . VARNAME EQUALSIGN expression
    (24) assignment -> . VARNAME EQUALSIGN LITERAL NEWLINE
    (25) assignment -> . VARNAME COLON CHARCLASS NEWLINE

    ENDSCOPE        reduce using rule 18 (definitions -> definition .)
    GLOBALMARK      shift and go to state 23
    VARNAME         shift and go to state 24

    definition                     shift and go to state 21
    assignment                     shift and go to state 22
    definitions                    shift and go to state 29

state 22

    (20) definition -> assignment .

    GLOBALMARK      reduce using rule 20 (definition -> assignment .)
    VARNAME         reduce using rule 20 (definition -> assignment .)
    ENDSCOPE        reduce using rule 20 (definition -> assignment .)


state 23

    (21) definition -> GLOBALMARK . assignment
    (22) assignment -> . VARNAME EQUALSIGN assignment
    (23) assignment -> . VARNAME EQUALSIGN expression
    (24) assignment -> . VARNAME EQUALSIGN LITERAL NEWLINE
    (25) assignment -> . VARNAME COLON CHARCLASS NEWLINE

    VARNAME         shift and go to state 24

    assignment                     shift and go to state 30

state 24

    (22) assignment -> VARNAME . EQUALSIGN assignment
    (23) assignment -> VARNAME . EQUALSIGN expression
    (24) assignment -> VARNAME . EQUALSIGN LITERAL NEWLINE
    (25) assignment -> VARNAME . COLON CHARCLASS NEWLINE

    EQUALSIGN       shift and go to state 32
    COLON           shift and go to state 31


state 25

    (7) expression -> lookup NEWLINE beginscope definitions . ENDSCOPE

    ENDSCOPE        shift and go to state 33


state 26

    (11) cells -> cell SLASH cells .

    NEWLINE         reduce using rule 11 (cells -> cell SLASH cells .)


state 27

    (16) cell -> OPENPAREN VARNAME QUESTMARK . CLOSEPAREN

    CLOSEPAREN      shift and go to state 34


state 28

    (14) cell -> OPENPAREN VARNAME CLOSEPAREN .
    (15) cell -> OPENPAREN VARNAME CLOSEPAREN . QUESTMARK

    SLASH           reduce using rule 14 (cell -> OPENPAREN VARNAME CLOSEPAREN .)
    QUESTMARK       shift and go to state 35


state 29

    (19) definitions -> definition definitions .

    ENDSCOPE        reduce using rule 19 (definitions -> definition definitions .)


state 30

    (21) definition -> GLOBALMARK assignment .

    GLOBALMARK      reduce using rule 21 (definition -> GLOBALMARK assignment .)
    VARNAME         reduce using rule 21 (definition -> GLOBALMARK assignment .)
    ENDSCOPE        reduce using rule 21 (definition -> GLOBALMARK assignment .)


state 31

    (25) assignment -> VARNAME COLON . CHARCLASS NEWLINE

    CHARCLASS       shift and go to state 36


state 32

    (22) assignment -> VARNAME EQUALSIGN . assignment
    (23) assignment -> VARNAME EQUALSIGN . expression
    (24) assignment -> VARNAME EQUALSIGN . LITERAL NEWLINE
    (22) assignment -> . VARNAME EQUALSIGN assignment
    (23) assignment -> . VARNAME EQUALSIGN expression
    (24) assignment -> . VARNAME EQUALSIGN LITERAL NEWLINE
    (25) assignment -> . VARNAME COLON CHARCLASS NEWLINE
    (6) expression -> . lookup NEWLINE
    (7) expression -> . lookup NEWLINE beginscope definitions ENDSCOPE
    (8) lookup -> . VARNAME
    (9) lookup -> . SLASH cells

    LITERAL         shift and go to state 38
    VARNAME         shift and go to state 37
    SLASH           shift and go to state 7

    assignment                     shift and go to state 39
    lookup                         shift and go to state 6
    expression                     shift and go to state 40

state 33

    (7) expression -> lookup NEWLINE beginscope definitions ENDSCOPE .

    ENDSCOPE        reduce using rule 7 (expression -> lookup NEWLINE beginscope definitions ENDSCOPE .)
    GLOBALMARK      reduce using rule 7 (expression -> lookup NEWLINE beginscope definitions ENDSCOPE .)
    VARNAME         reduce using rule 7 (expression -> lookup NEWLINE beginscope definitions ENDSCOPE .)
    $end            reduce using rule 7 (expression -> lookup NEWLINE beginscope definitions ENDSCOPE .)


state 34

    (16) cell -> OPENPAREN VARNAME QUESTMARK CLOSEPAREN .

    SLASH           reduce using rule 16 (cell -> OPENPAREN VARNAME QUESTMARK CLOSEPAREN .)


state 35

    (15) cell -> OPENPAREN VARNAME CLOSEPAREN QUESTMARK .

    SLASH           reduce using rule 15 (cell -> OPENPAREN VARNAME CLOSEPAREN QUESTMARK .)


state 36

    (25) assignment -> VARNAME COLON CHARCLASS . NEWLINE

    NEWLINE         shift and go to state 41


state 37

    (22) assignment -> VARNAME . EQUALSIGN assignment
    (23) assignment -> VARNAME . EQUALSIGN expression
    (24) assignment -> VARNAME . EQUALSIGN LITERAL NEWLINE
    (25) assignment -> VARNAME . COLON CHARCLASS NEWLINE
    (8) lookup -> VARNAME .

    EQUALSIGN       shift and go to state 32
    COLON           shift and go to state 31
    NEWLINE         reduce using rule 8 (lookup -> VARNAME .)


state 38

    (24) assignment -> VARNAME EQUALSIGN LITERAL . NEWLINE

    NEWLINE         shift and go to state 42


state 39

    (22) assignment -> VARNAME EQUALSIGN assignment .

    GLOBALMARK      reduce using rule 22 (assignment -> VARNAME EQUALSIGN assignment .)
    VARNAME         reduce using rule 22 (assignment -> VARNAME EQUALSIGN assignment .)
    ENDSCOPE        reduce using rule 22 (assignment -> VARNAME EQUALSIGN assignment .)


state 40

    (23) assignment -> VARNAME EQUALSIGN expression .

    GLOBALMARK      reduce using rule 23 (assignment -> VARNAME EQUALSIGN expression .)
    VARNAME         reduce using rule 23 (assignment -> VARNAME EQUALSIGN expression .)
    ENDSCOPE        reduce using rule 23 (assignment -> VARNAME EQUALSIGN expression .)


state 41

    (25) assignment -> VARNAME COLON CHARCLASS NEWLINE .

    GLOBALMARK      reduce using rule 25 (assignment -> VARNAME COLON CHARCLASS NEWLINE .)
    VARNAME         reduce using rule 25 (assignment -> VARNAME COLON CHARCLASS NEWLINE .)
    ENDSCOPE        reduce using rule 25 (assignment -> VARNAME COLON CHARCLASS NEWLINE .)


state 42

    (24) assignment -> VARNAME EQUALSIGN LITERAL NEWLINE .

    GLOBALMARK      reduce using rule 24 (assignment -> VARNAME EQUALSIGN LITERAL NEWLINE .)
    VARNAME         reduce using rule 24 (assignment -> VARNAME EQUALSIGN LITERAL NEWLINE .)
    ENDSCOPE        reduce using rule 24 (assignment -> VARNAME EQUALSIGN LITERAL NEWLINE .)

